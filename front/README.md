# 配套资料

> Vue 实战项目 [https://www.aliyundrive.com/s/p94dG38yf2A](https://www.aliyundrive.com/s/p94dG38yf2A)

# 设计稿

> html css 素材地址:
>
> https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202305092103293.zip

# 使用脚手架创建项目

> 选择要写项目的文件夹位置, 运行如下命令

```bash
vue create new-jd
```

![image-20230509210539818](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202305092107032.png)

![image-20230509210745744](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202305092107919.png)

![image-20230509210819187](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202305092108787.png)

![image-20230509210844687](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202305092112797.png)

![image-20230509210907706](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202305092112233.png)

![image-20230509210941653](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202305092112629.png)

![image-20230509211018049](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202305092112090.png)

![image-20230509211224338](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202305092112211.png)

> 把项目导入到 vscode, 运行项目进行测试

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181433405.png#crop=0&crop=0&crop=1&crop=1&id=ZlSB9&originHeight=440&originWidth=1124&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Ykfvw&originHeight=440&originWidth=1124&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181433738.png#crop=0&crop=0&crop=1&crop=1&id=JCuKi&originHeight=726&originWidth=1207&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jxyX9&originHeight=726&originWidth=1207&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 安装 vscode 插件

![image-20230509211512228](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202305092115027.png)

# 项目目录结构

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181442274.png#crop=0&crop=0&crop=1&crop=1&id=oYgdg&originHeight=438&originWidth=1344&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=pD4fL&originHeight=438&originWidth=1344&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181442859.png#crop=0&crop=0&crop=1&crop=1&id=BHq60&originHeight=333&originWidth=864&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=dBxgY&originHeight=333&originWidth=864&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181445655.png#crop=0&crop=0&crop=1&crop=1&id=D8rQC&originHeight=381&originWidth=1896&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=WmtRI&originHeight=381&originWidth=1896&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181443816.png#crop=0&crop=0&crop=1&crop=1&id=VgZzs&originHeight=385&originWidth=1029&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=dPVoz&originHeight=385&originWidth=1029&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181444284.png#crop=0&crop=0&crop=1&crop=1&id=Qyxzl&originHeight=426&originWidth=986&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=YqfWE&originHeight=426&originWidth=986&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181447323.png#crop=0&crop=0&crop=1&crop=1&id=f5fI5&originHeight=663&originWidth=1260&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=TiCtx&originHeight=663&originWidth=1260&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181449963.png#crop=0&crop=0&crop=1&crop=1&id=JRXm3&originHeight=667&originWidth=1866&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=oqRSM&originHeight=667&originWidth=1866&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181446061.png#crop=0&crop=0&crop=1&crop=1&id=O99ka&originHeight=489&originWidth=1303&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=A3jtf&originHeight=489&originWidth=1303&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181450661.png#crop=0&crop=0&crop=1&crop=1&id=KLVlp&originHeight=463&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=CaDiJ&originHeight=463&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181452391.png#crop=0&crop=0&crop=1&crop=1&id=K6fDM&originHeight=258&originWidth=1214&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=etPkA&originHeight=258&originWidth=1214&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181458459.png#crop=0&crop=0&crop=1&crop=1&id=iO2Sw&originHeight=490&originWidth=1174&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zlw0P&originHeight=490&originWidth=1174&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 设置项目基础 CSS

> 我们知道, 不同的浏览器, 有些默认样式是不同的, 比如 padding, margin, 为了抹平各个浏览器之间的差异, 我们通常会写`reset.css`, 类似于下面这样

```css
* {
	margin: 0;
	padding: 0;
}
```

> 我们还有另外一个办法, 就是安装一个`normalize.css`
>
> 介绍: [https://www.oschina.net/p/normalize-css?hmsr=aladdin1e1](https://www.oschina.net/p/normalize-css?hmsr=aladdin1e1)
>
> 安装的命令如下:

```bash
npm install normalize.css
```

> 如果安装报错, 可以执行如下命令(另一种解决方案)

```bash
npm i yarn -g
yarn add normalize.css
```

> 在 main.js 中引入

```javascript
// src\main.js
// ...
import "normalize.css";

createApp(App).use(store).use(router).mount("#app");
```

> 接下来创建 base.scss

```
// src\style\base.scss
html {
	font-size: 1px;
}

body {
	font-size: 12rem;
}
```

> 我们使用 rem 进行布局, 所以需要设置 html 的字体大小, 同时需要设置 body 的字体大小, 不然其他元素会继承 html 的字体大小
>
> 然后在 main.js 中引入

```javascript
// src\main.js
// ...
import "./style/base.scss";
createApp(App).use(store).use(router).mount("#app");
```

> 我们修改一下 App.vue, 看一下基础样式是否能正常使用

```vue
<template>hello world</template>
```

> 经过测试, 发现样式可以正常生效, 如果不确定, 可以给字体加个颜色即可

# CSS 的 BEM 命名法

> 随着项目越来越大, css 的代码量水涨船高, 随着代码量上升, css 变的越来越不好维护, 这时候我们针对 css 类名的命名就需要有一定的规范, 方便我们更好的维护代码, BEM 命名法是其中的一种, BEM 代表 block, element, modifier

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181615833.webp#crop=0&crop=0&crop=1&crop=1&id=kLGqU&originHeight=496&originWidth=999&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=B6Bep&originHeight=496&originWidth=999&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181616402.webp#crop=0&crop=0&crop=1&crop=1&id=rzUWz&originHeight=304&originWidth=513&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=yOKdt&originHeight=304&originWidth=513&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181616576.webp#crop=0&crop=0&crop=1&crop=1&id=KHOYz&originHeight=576&originWidth=916&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=GJxbZ&originHeight=576&originWidth=916&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 示例代码

```html
<form action="">
	username: <input type="text" /> password: <input type="text" />
	<button>submit</button>
</form>
```

> BEM 命名示例

```html
<form action="" class="login-form">
	username: <input type="text" class="login-form__input login-form__input_success" /> password:
	<input type="text" class="login-form__input login-form__input_fail" />
	<button>submit</button>
</form>
```

# 开发首页 docker

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181539989.png#crop=0&crop=0&crop=1&crop=1&id=S6NpL&originHeight=410&originWidth=579&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EBtk9&originHeight=410&originWidth=579&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写 html 代码

```html
<template>
	<!-- src\App.vue -->
	<div class="docker"></div>
</template>
```

> 根据设计稿编写 scss 代码

```
// src\App.vue
.docker {
	width: 375rem;
	height: 49rem;
	position: fixed;
	bottom: 0;
	left: 0;
	background: #ffffff;
	box-shadow: 0 -1rem 1rem 0 #f1f1f1;
}
```

> 这样就有一个最基本的效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181545822.png#crop=0&crop=0&crop=1&crop=1&id=PtJLP&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=I91HR&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 继续编写 html

```html
<!-- src\App.vue -->
<div class="docker">
	<span class="docker__item">
		<span class="docker__item__iconfont iconfont"> </span>
		<span class="docker__item__text"> 首页 </span>
	</span>
	<span class="docker__item">
		<span class="docker__item__iconfont iconfont"> </span>
		<span class="docker__item__text"> 购物车 </span>
	</span>
	<span class="docker__item">
		<span class="docker__item__iconfont iconfont"> </span>
		<span class="docker__item__text"> 订单 </span>
	</span>
	<span class="docker__item">
		<span class="docker__item__iconfont iconfont"> </span>
		<span class="docker__item__text"> 我的 </span>
	</span>
</div>
```

> 阶段性效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181631654.png#crop=0&crop=0&crop=1&crop=1&id=W1GNU&originHeight=104&originWidth=452&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=rwZ4z&originHeight=104&originWidth=452&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们还需要字体图标

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181632899.png#crop=0&crop=0&crop=1&crop=1&id=FIBJ6&originHeight=67&originWidth=407&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=c6t72&originHeight=67&originWidth=407&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 阿里图标库: [https://www.iconfont.cn/](https://www.iconfont.cn/)
>
> 我们根据效果图自己搜索类似的图标即可

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181638940.png#crop=0&crop=0&crop=1&crop=1&id=K2MuA&originHeight=804&originWidth=1221&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=fCnfj&originHeight=804&originWidth=1221&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181638697.png#crop=0&crop=0&crop=1&crop=1&id=Mnk16&originHeight=566&originWidth=924&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=FbAPL&originHeight=566&originWidth=924&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 把线上的 css 代码, 复制到 base.scss

```
// src\style\base.scss
@font-face {
	font-family: "iconfont"; /* project id 3191519 */
	src: url("");
	src: url("?#iefix") format("embedded-opentype"), url("//at.alicdn.com/t/font_3191519_p8n7uk5xa7d.woff2") format("woff2"),
		url("//at.alicdn.com/t/font_3191519_p8n7uk5xa7d.woff") format("woff"), url("//at.alicdn.com/t/font_3191519_p8n7uk5xa7d.ttf")
			format("truetype"), url("#iconfont") format("svg");
}
html {
	font-size: 1px;
}
body {
	font-size: 12rem;
}
```

> 修改 html 代码, 主要是添加字体对应的 unicode

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181657275.png#crop=0&crop=0&crop=1&crop=1&id=p7KlS&originHeight=830&originWidth=1068&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=yL1OG&originHeight=830&originWidth=1068&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181655221.png#crop=0&crop=0&crop=1&crop=1&id=PWP6F&originHeight=237&originWidth=595&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Y0Ihi&originHeight=237&originWidth=595&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 查看页面, 发现并没有生效

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181656185.png#crop=0&crop=0&crop=1&crop=1&id=yaFUB&originHeight=98&originWidth=476&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=T9RyC&originHeight=98&originWidth=476&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 需要修改 css 代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181657151.png#crop=0&crop=0&crop=1&crop=1&id=G2dV1&originHeight=630&originWidth=1468&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Rjpw7&originHeight=630&originWidth=1468&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181658915.png#crop=0&crop=0&crop=1&crop=1&id=JL06I&originHeight=119&originWidth=466&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=WgTUY&originHeight=119&originWidth=466&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 接下来, 我们就可编写底部 docker 的 css 样式了

```
// src\App.vue
.docker {
	width: 375rem;
	height: 49rem;
	position: fixed;
	bottom: 0;
	left: 0;
	background: #ffffff;
	box-shadow: 0 -1rem 1rem 0 #f1f1f1;
	display: flex;
	justify-content: space-evenly;
	align-items: center;
	padding-top: 10px;
}
.docker__item {
	display: flex;
	flex-direction: column;
	align-items: center;
}
.docker__item__iconfont {
	font-size: 20px;
}
.docker__item__text {
	margin-top: 2px;
	font-family: PingFangSC-Regular;
	font-size: 20px;
	color: #333333;
	transform: scale(0.5, 0.5);
	transform-origin: center top;
}
```

> 我们可以根据 scss 语法进行一定的修改

```
// src\App.vue
.docker {
	width: 375rem;
	height: 49rem;
	position: fixed;
	bottom: 0;
	left: 0;
	background: #ffffff;
	box-shadow: 0 -1rem 1rem 0 #f1f1f1;
	display: flex;
	justify-content: space-evenly;
	align-items: center;
	padding-top: 10px;
	&__item {
		display: flex;
		flex-direction: column;
		align-items: center;
		&__iconfont {
			font-size: 20px;
		}
		&__text {
			margin-top: 2px;
			font-family: PingFangSC-Regular;
			font-size: 20px;
			color: #333333;
			transform: scale(0.5, 0.5);
			transform-origin: center top;
		}
	}
}
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181733140.png#crop=0&crop=0&crop=1&crop=1&id=J2a0x&originHeight=91&originWidth=472&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=pPMOE&originHeight=91&originWidth=472&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们再来做一下选中高亮的效果

```
// src\App.vue
.docker {
	// ...
	&__item {
		// ...
		&__iconfont {
			// ...
		}
		&__text {
			// ...
		}
		&_active {
			color: #1fa4fc;
		}
	}
}
```

> 经过测试, 我们发现文字颜色还是黑的, 因为蓝色是继承, 优先级低

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181730991.png#crop=0&crop=0&crop=1&crop=1&id=OqaFU&originHeight=101&originWidth=433&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=A5xI1&originHeight=101&originWidth=433&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 解决方案是把黑色的代码, 写在 docker\_\_item 里面

```
// src\App.vue
.docker {
	// ...
	&__item {
		// ...
		color: #333333;
		&__iconfont {
			// ...
		}
		&__text {
			// ...
		}
		&_active {
			color: #1fa4fc;
		}
	}
}
```

> 这样效果就出来了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181731363.png#crop=0&crop=0&crop=1&crop=1&id=P16bY&originHeight=100&originWidth=415&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EFxLP&originHeight=100&originWidth=415&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最后, 记得把所有的 px 改成 rem

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202181824432.png#crop=0&crop=0&crop=1&crop=1&id=Ewinp&originHeight=822&originWidth=756&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=LaNeZ&originHeight=822&originWidth=756&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 开发首页 header

> 先确定首页的轮廓, 处理底部的 docker, 所有的内容都是首页的区域

```html
<!-- src\App.vue -->
<div class="container"></div>
<!-- ... -->
```

```
// src\App.vue
.container {
	position: absolute;
	left: 0;
	right: 0;
	top: 0;
	bottom: 49rem;
	background-color: olivedrab;
}
.docker {
	// ...
}
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191259489.png#crop=0&crop=0&crop=1&crop=1&id=BMZYL&originHeight=706&originWidth=442&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=AcZNs&originHeight=706&originWidth=442&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 轮廓确定后, 就可以着手开发 header 了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191245784.png#crop=0&crop=0&crop=1&crop=1&id=ILi9j&originHeight=217&originWidth=530&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=GsO5f&originHeight=217&originWidth=530&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 先写 html 代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191307646.png#crop=0&crop=0&crop=1&crop=1&id=f7tZD&originHeight=519&originWidth=1061&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Omdd3&originHeight=519&originWidth=1061&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191308032.png#crop=0&crop=0&crop=1&crop=1&id=KOpfL&originHeight=118&originWidth=409&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=YwHMw&originHeight=118&originWidth=409&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们需要添加字体图标, 搜索关键字 position 和 notice, 可以找到对应图标

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191316637.png#crop=0&crop=0&crop=1&crop=1&id=InPbY&originHeight=533&originWidth=850&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=mcYtZ&originHeight=533&originWidth=850&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 更新字体代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191316394.png#crop=0&crop=0&crop=1&crop=1&id=T6CBA&originHeight=398&originWidth=1076&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=qVthK&originHeight=398&originWidth=1076&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 把字体图标的 unicode 加入到项目里面去

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191319028.png#crop=0&crop=0&crop=1&crop=1&id=AVWn2&originHeight=474&originWidth=1117&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=qjEZ3&originHeight=474&originWidth=1117&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们可以看到字体图标了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191318239.png#crop=0&crop=0&crop=1&crop=1&id=v14C1&originHeight=78&originWidth=425&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=hUfrv&originHeight=78&originWidth=425&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 接下来编写 css

```
// src\App.vue
.container {
	// ...
	&__header {
		display: flex;
		justify-content: space-between;
		padding: 16px 19.2px;
		&__left__position-iconfont {
			font-size: 16px;
			margin-right: 9.7px;
		}
		&__left__position-text {
			font-family: PingFangSC-Regular;
			font-size: 16px;
			color: #333333;
		}
		&__right__notice-iconfont {
			font-size: 18px;
		}
	}
}

.docker {
	// ...
}
```

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191334871.png#crop=0&crop=0&crop=1&crop=1&id=jyFMA&originHeight=81&originWidth=406&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jt880&originHeight=81&originWidth=406&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 有个小细节, 如果地址过长的话, 页面样式会比较丑

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191337789.png#crop=0&crop=0&crop=1&crop=1&id=HU1kR&originHeight=452&originWidth=1449&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=hlFDm&originHeight=452&originWidth=1449&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们可以设置, 如果字体过长, 显示省略号

```
// src\App.vue
&__header {
	// ...
	&__left {
		width: 310px;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		&__position-iconfont {
			// ...
		}
		&__position-text {
			// ...
		}
	}
	&__right__notice-iconfont {
		// ...
	}
}
```

> 因为我们在用 scss, 所以我们可以把超出部分省略隐藏的代码做成 mixin

```
// src\style\mixins.scss
@mixin ellipsis {
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191444977.png#crop=0&crop=0&crop=1&crop=1&id=Vx5zk&originHeight=577&originWidth=1280&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=NlTCp&originHeight=577&originWidth=1280&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们也可以把颜色做成变量, 起到复用的效果

```
// src\style\variables.scss
$content-fontcolor: #333;
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191503618.png#crop=0&crop=0&crop=1&crop=1&id=jX8fC&originHeight=825&originWidth=1805&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Mmgn4&originHeight=825&originWidth=1805&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 首页搜索区域

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191504750.png#crop=0&crop=0&crop=1&crop=1&id=Gz6GV&originHeight=163&originWidth=498&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=OjgEg&originHeight=163&originWidth=498&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 首先编写 html 代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191526569.png#crop=0&crop=0&crop=1&crop=1&id=IqA6K&originHeight=476&originWidth=734&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Eq43k&originHeight=476&originWidth=734&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们需要字体图标, 去阿里图标库搜索 search

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191528198.png#crop=0&crop=0&crop=1&crop=1&id=z8ncn&originHeight=208&originWidth=803&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=pyCL4&originHeight=208&originWidth=803&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191530725.png#crop=0&crop=0&crop=1&crop=1&id=fRM7V&originHeight=272&originWidth=1049&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=QvxCc&originHeight=272&originWidth=1049&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 复制 unicode 到 html

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191530758.png#crop=0&crop=0&crop=1&crop=1&id=P3MpI&originHeight=326&originWidth=825&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=r1Gny&originHeight=326&originWidth=825&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191530667.png#crop=0&crop=0&crop=1&crop=1&id=VCr4h&originHeight=125&originWidth=412&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=mQyOb&originHeight=125&originWidth=412&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 接下来编写样式

```
// src\App.vue
// ...
.container {
	position: absolute;
	// ...
	&__header {
		// ...
	}
	&__search {
		text-align: center;
		position: relative;
		color: #b7b7b7;
		&__input {
			background: #f5f5f5;
			border-radius: 16px;
			width: 339px;
			height: 32px;
			padding-left: 44px;
			box-sizing: border-box;
			&::-webkit-input-placeholder {
				font-family: PingFangSC-Regular;
				font-size: 14px;
				line-height: 16px;
			}
			&:-moz-placeholder {
				font-family: PingFangSC-Regular;
				font-size: 14px;
				line-height: 16px;
			}
			&::-moz-placeholder {
				font-family: PingFangSC-Regular;
				font-size: 14px;
				line-height: 16px;
			}
			&:-ms-input-placeholder {
				font-family: PingFangSC-Regular;
				font-size: 14px;
				line-height: 16px;
			}
		}
		&__iconfont {
			position: absolute;
			left: 34px;
			top: 6px;
			font-size: 16px;
		}
	}
}

.docker {
	// ...
}
```

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191602167.png#crop=0&crop=0&crop=1&crop=1&id=B7sw3&originHeight=114&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ioq2T&originHeight=114&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 如果出现边框, 修改 base.scss

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203222142725.png#crop=0&crop=0&crop=1&crop=1&id=VzqLz&originHeight=448&originWidth=656&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=l82B3&originHeight=448&originWidth=656&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 首页 banner 区

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191603228.png#crop=0&crop=0&crop=1&crop=1&id=bnGFu&originHeight=399&originWidth=491&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Rl8vp&originHeight=399&originWidth=491&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 图片地址: [https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191609589.png](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191609589.png)
>
> 我们先编写 html 代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191618768.png#crop=0&crop=0&crop=1&crop=1&id=A92Eg&originHeight=390&originWidth=1345&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=vPq5i&originHeight=390&originWidth=1345&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191618024.png#crop=0&crop=0&crop=1&crop=1&id=tifZx&originHeight=523&originWidth=526&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=GU4ey&originHeight=523&originWidth=526&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 接下来编写 css

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191620794.png#crop=0&crop=0&crop=1&crop=1&id=QuDhr&originHeight=391&originWidth=326&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=rnr9B&originHeight=391&originWidth=326&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191620262.png#crop=0&crop=0&crop=1&crop=1&id=fhXzR&originHeight=195&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=n3o2a&originHeight=195&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 有个小细节, 如果网速比较慢, 图片没有加载出来的时候, 下面的内容会挤上来, 为了解决这个问题, 可以给 banner 设置一个高度, 保证下面的内容位置不会因为图片没有加载出来而发生变化

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191629347.png#crop=0&crop=0&crop=1&crop=1&id=Y1uLk&originHeight=471&originWidth=1292&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=WQpgE&originHeight=471&originWidth=1292&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 首页快捷导航

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191630908.png#crop=0&crop=0&crop=1&crop=1&id=xnLpd&originHeight=374&originWidth=484&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kGwED&originHeight=374&originWidth=484&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 首先编写 html, 需要的图标地址如下:
>
> [https://www.happy-learning.cn/cos/导航图标.zip](https://www.happy-learning.cn/cos/%E5%AF%BC%E8%88%AA%E5%9B%BE%E6%A0%87.zip)
>
> 我们先下载图标, 把图标移动到`src/assets/index`里面

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191714994.png#crop=0&crop=0&crop=1&crop=1&id=BouZw&originHeight=414&originWidth=1045&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Kc3Yq&originHeight=414&originWidth=1045&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> html 代码如下

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191719526.png#crop=0&crop=0&crop=1&crop=1&id=aAxqE&originHeight=1708&originWidth=1346&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Ux7Dh&originHeight=1708&originWidth=1346&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191718154.png#crop=0&crop=0&crop=1&crop=1&id=VjyJS&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=esIZZ&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 接下来编写 css 样式

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203222208915.png#crop=0&crop=0&crop=1&crop=1&id=Q8ui7&originHeight=602&originWidth=300&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=dcTQs&originHeight=602&originWidth=300&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
&__nav {
	padding-left: 14px;
	padding-right: 14px;
	box-sizing: border-box;
	display: flex;
	flex-wrap: wrap;
	margin-top: 16px;
	&__item {
		width: 20%;
		display: flex;
		flex-direction: column;
		align-items: center;
		margin-bottom: 16px;
		&__img {
			width: 40px;
			height: 40px;
			margin-bottom: 6px;
		}
		&__text {
			font-family: PingFangSC-Regular;
			font-size: 12px;
			color: #333333;
			text-align: center;
		}
	}
}
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191729527.png#crop=0&crop=0&crop=1&crop=1&id=elTcX&originHeight=371&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=V1JS8&originHeight=371&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们可以优化一下代码, 之前定义的变量可以用上

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191730342.png#crop=0&crop=0&crop=1&crop=1&id=rVSZC&originHeight=238&originWidth=525&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=v0deR&originHeight=238&originWidth=525&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 首页内容间缝隙

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191733390.png#crop=0&crop=0&crop=1&crop=1&id=rYGmK&originHeight=447&originWidth=422&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=BoKns&originHeight=447&originWidth=422&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写 html

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191734781.png#crop=0&crop=0&crop=1&crop=1&id=d0y3d&originHeight=489&originWidth=541&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Xts59&originHeight=489&originWidth=541&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写 css

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191734125.png#crop=0&crop=0&crop=1&crop=1&id=md2kY&originHeight=793&originWidth=450&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=FJ0pS&originHeight=793&originWidth=450&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 导航区的背景色去除后, 可以看到最终的效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191735293.png#crop=0&crop=0&crop=1&crop=1&id=RTquH&originHeight=390&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=y5gDD&originHeight=390&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 记得把所有的 px 改成 rem

# 把页面布局做成自动适应

> 我们发现, iphone6/7/8 的页面没有问题, 但是换成其他机型, 页面就会出问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191740288.png#crop=0&crop=0&crop=1&crop=1&id=XQBEu&originHeight=893&originWidth=1832&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=H96Tt&originHeight=893&originWidth=1832&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 原因是我们虽然以 rem 为单位, 但是 html 的字体大小还是写到 1px, 我们需要把 px 换成 vw

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191742390.png#crop=0&crop=0&crop=1&crop=1&id=semzt&originHeight=403&originWidth=1136&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=JmBrL&originHeight=403&originWidth=1136&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202191743870.png#crop=0&crop=0&crop=1&crop=1&id=r8ow3&originHeight=893&originWidth=1832&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=J3eMn&originHeight=893&originWidth=1832&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 首页附近店铺

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211349552.png#crop=0&crop=0&crop=1&crop=1&id=lM1VQ&originHeight=277&originWidth=371&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nweig&originHeight=277&originWidth=371&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 首先编写 html 代码
>
> 图片路径: [https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211409294.png#crop=0&crop=0&crop=1&crop=1&id=AnymF&originHeight=889&originWidth=1572&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=iqkgB&originHeight=889&originWidth=1572&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 接下来编写 css

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203232126493.png#crop=0&crop=0&crop=1&crop=1&id=sfphP&originHeight=834&originWidth=643&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kYJam&originHeight=834&originWidth=643&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```css
&__nearby {
	padding: 16px 18px;
	&__title {
		font-family: PingFangSC-Medium;
		font-size: 18px;
		color: #333333;
		margin-bottom: 14px;
	}
	&__item {
		margin-bottom: 12px;
		display: flex;
		&__left {
			margin-right: 16px;
			&__img {
				width: 56px;
				height: 56px;
			}
		}
		&__right {
			background-color: #fff;
			flex-grow: 1;
			border-bottom: 1px solid #f1f1f1;
			&__title {
				font-family: PingFangSC-Regular;
				font-size: 16px;
				color: #333333;
				margin-bottom: 8px;
			}
			&__tags {
				display: flex;
				margin-bottom: 8px;
				&__item {
					font-family: PingFangSC-Regular;
					font-size: 13px;
					color: #333333;
					margin-right: 16px;
				}
			}
			&__notice {
				font-family: PingFangSC-Regular;
				font-size: 13px;
				color: #e93b3b;
				margin-bottom: 12px;
			}
		}
	}
}
```

> 我们可以多复制几份, 看看效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211424482.png#crop=0&crop=0&crop=1&crop=1&id=sWFXj&originHeight=521&originWidth=806&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=PRnQ4&originHeight=521&originWidth=806&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 发现两个问题, 一个是各个 item 挨得太近, 一个是最后一个 item 被 docker 盖住了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211445197.png#crop=0&crop=0&crop=1&crop=1&id=LvJRG&originHeight=466&originWidth=466&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nfNRy&originHeight=466&originWidth=466&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 解决方案如下

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211444610.png#crop=0&crop=0&crop=1&crop=1&id=vH0SA&originHeight=478&originWidth=929&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ViImg&originHeight=478&originWidth=929&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211445486.png#crop=0&crop=0&crop=1&crop=1&id=CMAVP&originHeight=584&originWidth=463&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=esTar&originHeight=584&originWidth=463&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 记得把`#333333`改成`$content-fontcolor`, 把`px`改成`rem`

# 首页代码合理拆分

> 我们发现, 首页的代码量越来越大, 代码越来越难以维护, 所以我们需要把首页拆成组件
>
> 先新建`src\views\home\Home.vue`, 把原来`src\App.vue`的代码拷贝进去
>
> 然后注意修改路径

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211634709.png#crop=0&crop=0&crop=1&crop=1&id=PjTM6&originHeight=376&originWidth=1677&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=FrOKq&originHeight=376&originWidth=1677&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 在`src\App.vue`中引入`Home.vue`

```vue
<template>
	<Home />
</template>

<script>
import Home from "./views/home/Home.vue";
export default {
	name: "App",
	components: { Home },
};
</script>
```

> 注意修改路由`src\router\index.js`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211635756.png#crop=0&crop=0&crop=1&crop=1&id=qdfnA&originHeight=399&originWidth=759&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=e1712&originHeight=399&originWidth=759&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 拆分之后, 提示错误, 组件命名需要多个单词,

> 解决方案 1, 在组件的名字后面添加 View, 比如 Home, 改成 HomeView, Banner 改成 BannerView
>
> 解决方案 2, 修改配置文件, 打开`.eslintrc.js`

```json
 "vue/multi-word-component-names":"off"
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203232143758.png#crop=0&crop=0&crop=1&crop=1&id=OjbmM&originHeight=211&originWidth=991&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EqRcE&originHeight=211&originWidth=991&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 然后重启服务即可

```bash
 npm run serve
```

> 解决完 bug, 我们就可以继续拆分`src\views\home\Home.vue`
>
> 我们把页面的每一块都进行拆分, 新建对应的 vue 文件, 填写基本的代码

```
src\views\home\Banner.vue
src\views\home\Docker.vue
src\views\home\Gap.vue
src\views\home\Header.vue
src\views\home\Nav.vue
src\views\home\Nearby.vue
src\views\home\Search.vue
```

```vue
<template>
	<div></div>
</template>
<script>
export default {};
</script>
<style lang="scss"></style>
```

> 拆分代码到`src\views\home\Header.vue`, 完善代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211706545.png#crop=0&crop=0&crop=1&crop=1&id=BjX6y&originHeight=587&originWidth=516&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=vvTBk&originHeight=587&originWidth=516&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 在`src\views\home\Home.vue`中使用 header 组件

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211711222.png#crop=0&crop=0&crop=1&crop=1&id=QUI2w&originHeight=365&originWidth=1158&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Qd6DQ&originHeight=365&originWidth=1158&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 查看页面, 发现没有什么问题, 其他组件同理, 不再赘述
>
> Docker 因为是公共组件, 应该放到`src\components`里面

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203232159294.png#crop=0&crop=0&crop=1&crop=1&id=xMbnR&originHeight=376&originWidth=583&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=is1PL&originHeight=376&originWidth=583&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203232158114.png#crop=0&crop=0&crop=1&crop=1&id=uoAx1&originHeight=553&originWidth=975&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Kl4jy&originHeight=553&originWidth=975&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# docker 代码精简

> docker 的 html 代码有大量重复的部分, 可以做一个精简, 定义一个数组, 使用`v-for`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211743049.png#crop=0&crop=0&crop=1&crop=1&id=mbQmP&originHeight=476&originWidth=489&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=NbOpR&originHeight=476&originWidth=489&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211744666.png#crop=0&crop=0&crop=1&crop=1&id=ngPea&originHeight=400&originWidth=742&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=lcQA7&originHeight=400&originWidth=742&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 效果如下, 发现全部高亮, 并且字体图标的 unicode 被转义了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211743284.png#crop=0&crop=0&crop=1&crop=1&id=ZbGgD&originHeight=141&originWidth=487&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Y99Nv&originHeight=141&originWidth=487&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 解决方案, 使用`v-html`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211745841.png#crop=0&crop=0&crop=1&crop=1&id=YIVn5&originHeight=318&originWidth=783&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=BOMNR&originHeight=318&originWidth=783&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211745798.png#crop=0&crop=0&crop=1&crop=1&id=iBm72&originHeight=97&originWidth=413&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=h4kxI&originHeight=97&originWidth=413&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 高亮是因为所有的 span 都有类`docker__item_active`, 解决方案是, 可以把 class 变成对象形式

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211749802.png#crop=0&crop=0&crop=1&crop=1&id=HotcN&originHeight=391&originWidth=853&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=eyMEM&originHeight=391&originWidth=853&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211749476.png#crop=0&crop=0&crop=1&crop=1&id=szv7e&originHeight=109&originWidth=459&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=SwyZw&originHeight=109&originWidth=459&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 附近商铺代码精简

> 附近商铺的 html 代码有大量重复的部分, 可以做一个精简, 定义一个数组, 使用`v-for`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211807395.png#crop=0&crop=0&crop=1&crop=1&id=Yjejm&originHeight=1708&originWidth=1405&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=rEA28&originHeight=1708&originWidth=1405&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 遍历数据

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211811652.png#crop=0&crop=0&crop=1&crop=1&id=ALSdN&originHeight=850&originWidth=2022&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Ia4tj&originHeight=850&originWidth=2022&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最终效果:

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211811243.png#crop=0&crop=0&crop=1&crop=1&id=ZREod&originHeight=584&originWidth=417&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=DslG1&originHeight=584&originWidth=417&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 导航精简

> 导航的 html 代码有大量重复的部分, 可以做一个精简, 定义一个数组, 使用`v-for`
>
> 因为抽离数据, 是为了将来的 ajax, 所以图标的路径, 我们换成线上的

```
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211843776.png
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211843550.png
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211843505.png
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211843412.png
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211844276.png
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211844145.png
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211844545.png
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211844072.png
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211844735.png
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211844286.png
```

> 抽离数据

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211846797.png#crop=0&crop=0&crop=1&crop=1&id=eKXmg&originHeight=1903&originWidth=1405&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EicmU&originHeight=1903&originWidth=1405&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 展示数据

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211847398.png#crop=0&crop=0&crop=1&crop=1&id=XMwka&originHeight=389&originWidth=735&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zhIR5&originHeight=389&originWidth=735&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# css 作用域约束

> 我们之前测试过, 默认情况下, 各组件之间的 css 会互相影响

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211857976.png#crop=0&crop=0&crop=1&crop=1&id=fJaH5&originHeight=758&originWidth=1264&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=rsJpL&originHeight=758&originWidth=1264&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 如果我们想让的 css 只对当前组件生效, 可以使用 scoped

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211858768.png#crop=0&crop=0&crop=1&crop=1&id=KoOW2&originHeight=715&originWidth=1192&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=CN6cs&originHeight=715&originWidth=1192&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 可以使用 vscode 的批量替换功能

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211900621.png#crop=0&crop=0&crop=1&crop=1&id=MX0Id&originHeight=547&originWidth=1264&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Ut7xc&originHeight=547&originWidth=1264&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# eslint 格式化插件

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221423513.png#crop=0&crop=0&crop=1&crop=1&id=KzGfv&originHeight=166&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=poabU&originHeight=166&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 这个插件可以把代码按照 eslint 的标准进行格式化

# 登录页面

> 我们的逻辑是, 用户只有登录了才能访问首页, 所以我们接下来做登录页

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221407896.png#crop=0&crop=0&crop=1&crop=1&id=LvPVt&originHeight=685&originWidth=391&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=oYT73&originHeight=685&originWidth=391&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 先修改`src\App.vue`

```vue
<template>
	<Login />
</template>

<script>
// import Home from './views/home/Home.vue'
import Login from "./views/login/Login.vue";
export default {
	name: "App",
	components: { Login },
};
</script>
```

> 然后新建`src\views\login\Login.vue`

```vue
<template>
	<div>hello world</div>
</template>
<script>
export default {
	name: "Login",
};
</script>
<style lang="scss" scoped></style>
```

> 看一下效果, 代码能不能跑通

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221425813.png#crop=0&crop=0&crop=1&crop=1&id=tvIwv&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=lpMp1&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写 html 代码
>
> 图片地址: [https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221429453.png](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221429453.png)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221456580.png#crop=0&crop=0&crop=1&crop=1&id=PvDLd&originHeight=1162&originWidth=1314&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=e9leY&originHeight=1162&originWidth=1314&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221457592.png#crop=0&crop=0&crop=1&crop=1&id=LyAH2&originHeight=274&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=P7SLR&originHeight=274&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 接下来编写 css

```
.container {
	// 头像
	&__portrait {
		margin-top: 120px;
		margin-bottom: 40px;
		text-align: center;
		&__img {
			width: 66px;
			height: 66px;
		}
	}
	// 输入框, 用户名/手机号 密码
	&__input {
		text-align: center;
		&__item {
			width: 295px;
			height: 48px;
			background: #f9f9f9;
			border: 1px solid rgba(0, 0, 0, 0.1);
			border-radius: 6px;
			margin-bottom: 16px;
			font-family: PingFangSC-Regular;
			font-size: 16px;
			color: rgba(0, 0, 0, 0.5);
			padding-left: 16px;
			box-sizing: border-box;
		}
	}
	// 登录按钮
	&__button {
		margin-bottom: 16px;
		text-align: center;
		&__login {
			width: 295px;
			height: 48px;
			background: #0091ff;
			box-shadow: 0 4px 8px 0 rgba(0, 145, 255, 0.32);
			border-radius: 4px;
			font-family: PingFangSC-Regular;
			font-size: 16px;
			color: #ffffff;
			letter-spacing: 0;
			text-align: center;
			line-height: 48px;
		}
	}
	&__content {
		text-align: center;
		&__a {
			font-family: PingFangSC-Regular;
			font-size: 14px;
			color: rgba(0, 0, 0, 0.5);
			letter-spacing: 0;
		}
		&__gap {
			margin: 0 12px;
			font-family: PingFangSC-Regular;
			font-size: 12px;
			color: rgba(0, 0, 0, 0.5);
			letter-spacing: 0;
		}
	}
}
```

> 有些公共样式, 我们写在`src\style\base.scss`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203242145390.png#crop=0&crop=0&crop=1&crop=1&id=VEG7v&originHeight=445&originWidth=714&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=wtESo&originHeight=445&originWidth=714&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221528774.png#crop=0&crop=0&crop=1&crop=1&id=ZBzTE&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=lcvTu&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 路由设置

> 配置一下路由, 让`http://localhost:8080/#/`跳到首页, 让`http://localhost:8080/#/login`跳到登录页

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221531655.png#crop=0&crop=0&crop=1&crop=1&id=oQzCl&originHeight=757&originWidth=809&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=fJtq2&originHeight=757&originWidth=809&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 需要修改`src\App.vue`

```vue
<template>
	<router-view></router-view>
</template>

<script>
export default {
	name: "App",
};
</script>
```

# 登录校验

> 逻辑如下:
>
> 如果没有登录, 访问首页或者其他任何页面, 都会跳到登录页
>
> 如果已经登录, 访问登录页面会跳到首页
>
> 点击登录按钮, 登录成功, 自动跳转到首页

> 我们可以使用`localStorage.isLogin`来存储登录状态
>
> 首先修改`src\router\index.js`

```javascript
// to 跳到哪里去
// from 从哪里跳过来
// next 继续执行
router.beforeEach((to, from, next) => {
	console.log(to, from);
	next();
});
export default router;
```

> next 的用法`next({name:'Login'})`跳转到 Login 路由
>
> 我们可以做如下判断

```javascript
// src\router\index.js
// to 跳到哪里去
// from 从哪里跳过来
// next 继续执行
router.beforeEach((to, from, next) => {
	if (localStorage.isLogin === "true" || to.name === "Login") {
		next();
	} else {
		next({ name: "Login" });
	}
});
export default router;
```

> 点击登录, 保存登录状态, 跳到首页, 页面跳转可以使用 `router.push`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203252122403.png#crop=0&crop=0&crop=1&crop=1&id=qumET&originHeight=207&originWidth=854&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ngTlO&originHeight=207&originWidth=854&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```javascript
// src\views\login\Login.vue
import { useRouter } from "vue-router";
export default {
	name: "Login",
	setup() {
		const router = useRouter();
		const handleLogin = () => {
			localStorage.setItem("isLogin", "true");
			router.push({ name: "Home" });
		};
		return { handleLogin };
	},
};
```

> 如果已经登录, 访问登录页面的时候, 应该跳回到首页

```javascript
const routes = [
	{
		path: "/",
		name: "Home",
		component: Home,
	},
	{
		path: "/login",
		name: "Login",
		component: Login,
		// src\router\index.js
		// 访问login页面之前执行
		beforeEnter: (to, from, next) => {
			if (localStorage.isLogin === "true") {
				next({ name: "Home" });
			} else {
				next();
			}
		},
	},
];
```

# 注册页面

> 注册页面和登录页面很像, 我们可以复制代码, 稍作修改

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221707320.png#crop=0&crop=0&crop=1&crop=1&id=izEBh&originHeight=765&originWidth=1058&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ljOGB&originHeight=765&originWidth=1058&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221715246.png#crop=0&crop=0&crop=1&crop=1&id=rTOEt&originHeight=320&originWidth=520&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=pdUL9&originHeight=320&originWidth=520&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们需要配置路由

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221719517.png#crop=0&crop=0&crop=1&crop=1&id=CiAHx&originHeight=797&originWidth=1913&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=pObSo&originHeight=797&originWidth=1913&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 这样我们就可以调效果了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221723052.png#crop=0&crop=0&crop=1&crop=1&id=P6XKU&originHeight=237&originWidth=563&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ODHdy&originHeight=237&originWidth=563&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221723819.png#crop=0&crop=0&crop=1&crop=1&id=srom9&originHeight=263&originWidth=833&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=WAoYN&originHeight=263&originWidth=833&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221722651.png#crop=0&crop=0&crop=1&crop=1&id=NtTLs&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=dGY3C&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 登录注册的跳转逻辑

> 1. 如果已经登录, 跳到注册页面会跳回首页
> 2. 如果没有登录, 可以正常跳转到注册页
> 3. 登录页可以跳转到注册页
> 4. 注册页可以跳转到登录页

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221904341.png#crop=0&crop=0&crop=1&crop=1&id=DQZFb&originHeight=824&originWidth=1422&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Z3Pxy&originHeight=824&originWidth=1422&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 注意设置 a 标签的跳转路径

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221903167.png#crop=0&crop=0&crop=1&crop=1&id=CWFis&originHeight=534&originWidth=889&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=xcFrD&originHeight=534&originWidth=889&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221902853.png#crop=0&crop=0&crop=1&crop=1&id=SmJrK&originHeight=180&originWidth=1154&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Rw8Nl&originHeight=180&originWidth=1154&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 修改 vue 文件

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202221901952.png#crop=0&crop=0&crop=1&crop=1&id=PEthR&originHeight=816&originWidth=1447&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Ich9u&originHeight=816&originWidth=1447&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 调用后台接口实现登录功能

> 我们需要接口的时候, 可能后台还没有把接口写好, 这个时候, 后台往往会借助 mock 平台, 做一个假的接口给我们, 让我们能够正常书写 ajax 的逻辑
>
> 所谓假的接口, 只是说没有内部验证逻辑, 返回的数据都是一样的(都是登录成功), 不管你的用户名和密码是对是错, 接口地址 url(域名+路径), 后面的路径是最终的路径不会变
>
> 到最后, 我们把 mock 平台的域名改成自己项目的域名即可
>
> 比较好用的 mock 平台 [https://www.fastmock.site](https://www.fastmock.site)
>
> 之前因为有用户做的接口涉嫌诈骗, 网站被关停了一段时间, 现已恢复
>
> 接下来我们创建一个用户登录的接口

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203252154811.png#crop=0&crop=0&crop=1&crop=1&id=JnfpS&originHeight=666&originWidth=864&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=GOd2f&originHeight=666&originWidth=864&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```json
/*
请求 
content-type:JSON

request-body 

{
  "username":'15638765644',
  "password":'123456'
}


*/

{
	"code": "0000",
	"desc": "登录成功!!!",
	"data": {
		"id": 666
	}
}
```

> 调用 ajax, 我们需要 axios, 运行如下命令安装

```bash
npm i axios
```

> 安装完检查一下 package.json

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231103418.png#crop=0&crop=0&crop=1&crop=1&id=XIam0&originHeight=333&originWidth=627&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=hDeh4&originHeight=333&originWidth=627&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 说明安装成功, 可以编写 ajax 代码了
>
> 文档地址: [http://www.axios-js.com/zh-cn/docs/](http://www.axios-js.com/zh-cn/docs/)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203252203155.png#crop=0&crop=0&crop=1&crop=1&id=XaBOY&originHeight=206&originWidth=933&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=VUnnH&originHeight=206&originWidth=933&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231115967.png#crop=0&crop=0&crop=1&crop=1&id=NgZkL&originHeight=877&originWidth=1076&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Ir3SB&originHeight=877&originWidth=1076&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 输出测试后, 可以得到结果, 继续编写后面的逻辑

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231116116.png#crop=0&crop=0&crop=1&crop=1&id=kKlsi&originHeight=203&originWidth=870&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=upEoB&originHeight=203&originWidth=870&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231118523.png#crop=0&crop=0&crop=1&crop=1&id=ZMqgm&originHeight=1124&originWidth=1146&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Djj0c&originHeight=1124&originWidth=1146&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 现在的数据是写死的, 我们需要获取 input 框的数据, 传给接口
>
> `src\views\login\Login.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231131781.png#crop=0&crop=0&crop=1&crop=1&id=Ud5eT&originHeight=609&originWidth=703&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ds1In&originHeight=609&originWidth=703&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231131380.png#crop=0&crop=0&crop=1&crop=1&id=t99UB&originHeight=312&originWidth=1024&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nVq3h&originHeight=312&originWidth=1024&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231131952.png#crop=0&crop=0&crop=1&crop=1&id=V8KlH&originHeight=189&originWidth=531&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=DUziJ&originHeight=189&originWidth=531&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231131905.png#crop=0&crop=0&crop=1&crop=1&id=kExlA&originHeight=770&originWidth=796&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=G4c13&originHeight=770&originWidth=796&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 另外, 接口文档上说, 需要`content-type:json`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231133764.png#crop=0&crop=0&crop=1&crop=1&id=WpnZl&originHeight=854&originWidth=1824&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=OloEg&originHeight=854&originWidth=1824&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231136390.png#crop=0&crop=0&crop=1&crop=1&id=D0vOB&originHeight=240&originWidth=768&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zvBgi&originHeight=240&originWidth=768&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231137693.png#crop=0&crop=0&crop=1&crop=1&id=G8gM5&originHeight=559&originWidth=814&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Ly262&originHeight=559&originWidth=814&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# async 和 await 的用法

> async 是一个修饰符，被它定义的函数会默认的返回一个 Promise 的 resolve 的值。
>
> 因此对 async 函数可以直接进行 then 操作，返回的值即为 then() 方法的传入函数。

```jsx
async function demo() {
	console.log("a");
	return 123;
}
demo().then((res) => {
	console.log(res);
});
```

> await 同 async 一样，作为修饰符，但是它只能放在 async 内部使用。
>
> 它是获取 Promise 中返回的内容， 即这个 Promise 函数中 resolve 或者 reject 的值。
>
> 所以，async 用于声明一个 function 是异步的，而 await 用于等待一个异步方法执行完成

```jsx
const myFun = function () {
	return "test";
};

async function myFun2() {
	const a = await 1;
	const b = await new Promise((resolve, reject) => {
		setTimeout(() => {
			resolve("wait");
		}, 3000);
	});
	const c = await myFun();
	console.log(a, b, c);
}

myFun2();
```

> 比如说，等待三个数据结果都返回，计算它们的和

```jsx
function doubleAfter2seconds(num) {
	return new Promise((resolve, reject) => {
		setTimeout(() => {
			resolve(2 * num);
		}, 1000);
	});
}
async function testResult() {
	let first = await doubleAfter2seconds(1);
	let second = await doubleAfter2seconds(2);
	let third = await doubleAfter2seconds(3);
	console.log(first + second + third);
}
testResult();
```

# 封装请求函数

> 我们可以对 axios 请求数据的代码进行一个封装
>
> 首先使用 await 和 try catch, 改变一下代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231515996.png#crop=0&crop=0&crop=1&crop=1&id=X1Rzt&originHeight=850&originWidth=1464&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=vlQoI&originHeight=850&originWidth=1464&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> try catch 用来捕获异常, 如果 try 里面的代码存在异常, 就会执行 catch 里面的代码
>
> 接下来新建`src\utils\request.js`, 我们对请求进行封装

```javascript
// src\utils\request.js
import axios from "axios";
axios.defaults.headers.post["Content-Type"] = "application/json";
axios.defaults.baseURL = "https://www.fastmock111.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin";
const post = (url, data = {}) => {
	return new Promise((resolve, reject) => {
		axios.post(url, data).then(
			(response) => {
				resolve(response);
			},
			(error) => {
				reject(error);
			}
		);
	});
};
export { post };
```

> 在`src\views\login\Login.vue`中使用

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231548663.png#crop=0&crop=0&crop=1&crop=1&id=STfW8&originHeight=812&originWidth=1827&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=XhdNI&originHeight=812&originWidth=1827&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 弹框组件

> 我们做一个自定义的弹框组件, 来替换掉浏览器默认的弹框
>
> 这是一个公共组件

```vue
<template>
	<!-- src\components\Toast.vue -->
	<div class="toast">这是弹框</div>
</template>
<script>
export default {
	name: "Toast",
};
</script>
<style lang="scss" scoped></style>
```

> 我们给一些样式

```css
.toast {
	position: fixed;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	background-color: rgba(0, 0, 0, 0.35);
	padding: 10rem;
	border-radius: 5rem;
	color: #fff;
}
```

> 尝试在`src\views\login\Login.vue`中使用

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231610485.png#crop=0&crop=0&crop=1&crop=1&id=D67XZ&originHeight=789&originWidth=1121&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=p5i9w&originHeight=789&originWidth=1121&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231610132.png#crop=0&crop=0&crop=1&crop=1&id=pgfBS&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kqxRG&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 使用 v-if 来控制显示和隐藏

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231634618.png#crop=0&crop=0&crop=1&crop=1&id=e4MdU&originHeight=396&originWidth=2000&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jlw8q&originHeight=396&originWidth=2000&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 自定义展示的信息

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231637045.png#crop=0&crop=0&crop=1&crop=1&id=xzY93&originHeight=332&originWidth=1961&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Nym90&originHeight=332&originWidth=1961&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 需要在组件里面使用`toastMessage`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231638023.png#crop=0&crop=0&crop=1&crop=1&id=coJUl&originHeight=436&originWidth=747&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=MGKk6&originHeight=436&originWidth=747&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231638810.png#crop=0&crop=0&crop=1&crop=1&id=hbI0s&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=vp9pd&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 设置 2 秒之后自动消失

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231640855.png#crop=0&crop=0&crop=1&crop=1&id=Ysvjs&originHeight=338&originWidth=551&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Pkyt7&originHeight=338&originWidth=551&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 定义 showToast, 对代码进行封装

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231644016.png#crop=0&crop=0&crop=1&crop=1&id=HvfPq&originHeight=403&originWidth=1280&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=uULNF&originHeight=403&originWidth=1280&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 通过代码拆分增加逻辑可维护性

> 引用时, 全局的放到上面, 自定义的写在下面

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231652301.png#crop=0&crop=0&crop=1&crop=1&id=EAJLg&originHeight=205&originWidth=613&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ykIJ0&originHeight=205&originWidth=613&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 把 showToast 相关的逻辑, 进行拆分

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231700315.png#crop=0&crop=0&crop=1&crop=1&id=xBuVo&originHeight=873&originWidth=1776&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jdEj4&originHeight=873&originWidth=1776&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 因为弹框的逻辑, 其他页面也要使用, 所以可以把相关的逻辑代码, 放到`src\components\Toast.vue` 里面去

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231708302.png#crop=0&crop=0&crop=1&crop=1&id=G1Vc8&originHeight=909&originWidth=1728&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=KB46E&originHeight=909&originWidth=1728&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们可以继续拆分, 尽量做到 setup 中逻辑更加清晰
>
> 首先可以把 data 进行一个结构

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231823148.png#crop=0&crop=0&crop=1&crop=1&id=q0JlE&originHeight=673&originWidth=1596&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=WS223&originHeight=673&originWidth=1596&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> toastData, 也可以进行解构

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231829046.png#crop=0&crop=0&crop=1&crop=1&id=BWER4&originHeight=586&originWidth=1572&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=qLvuR&originHeight=586&originWidth=1572&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231831320.png#crop=0&crop=0&crop=1&crop=1&id=KKDdO&originHeight=582&originWidth=1732&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=yXaXM&originHeight=582&originWidth=1732&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们也可以把登录的逻辑抽象出来

```javascript
// src\views\login\Login.vue
const userLoginEffect = (showToast) => {
	const data = reactive({
		phone: "",
		password: "",
	});
	const router = useRouter();
	// src\views\login\Login.vue
	const handleLogin = async () => {
		// 调用接口
		try {
			const result = await post("/api/user/login", {
				phone: data.phone,
				password: data.password,
			});
			if (result.data.code === "0000") {
				localStorage.setItem("isLogin", "true");
				router.push({ name: "Home" });
			} else {
				showToast("登录失败, 用户名或密码不正确...");
			}
		} catch (error) {
			showToast("发送请求失败!");
		}
	};
	// 返回数据
	const { phone, password } = toRefs(data);
	return {
		phone,
		password,
		handleLogin,
	};
};
```

> 继续拆离用户注册跳转的相关逻辑

```javascript
// src\views\login\Login.vue
const userRegisterEffect = () => {
	const router = useRouter();
	const handleRegister = () => {
		router.push({ name: "Register" });
	};
	return { handleRegister };
};
```

> 经过代码的拆离之后, setup 其实只做一件事, 就是告诉你代码调用的逻辑

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231843340.png#crop=0&crop=0&crop=1&crop=1&id=BgPC4&originHeight=672&originWidth=964&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EFJja&originHeight=672&originWidth=964&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 编写注册页面

> 登录和注册页面, 很多逻辑都是相似的, 我们复制, 稍作修改即可
>
> 先创建接口

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203282145255.png#crop=0&crop=0&crop=1&crop=1&id=hMh11&originHeight=1138&originWidth=1429&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=H56Se&originHeight=1138&originWidth=1429&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 需要修改的代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231917138.png#crop=0&crop=0&crop=1&crop=1&id=krJ0M&originHeight=395&originWidth=1114&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=NTwaQ&originHeight=395&originWidth=1114&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202231917859.png#crop=0&crop=0&crop=1&crop=1&id=pDszG&originHeight=793&originWidth=652&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=QiA1Q&originHeight=793&originWidth=652&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```javascript
// src\views\register\Register.vue
import { reactive, toRefs } from "vue";
import { useRouter } from "vue-router";
import { post } from "@/utils/request";
import Toast, { showToastEffect } from "@/components/Toast.vue";
const userRegisterEffect = (showToast) => {
	const data = reactive({
		phone: "",
		password: "",
		confirmPassword: "",
	});
	const router = useRouter();
	const handleRegister = async () => {
		if (data.password !== data.confirmPassword) {
			showToast("密码不一致!");
		} else {
			// 调用接口
			try {
				const result = await post("/api/user/register", {
					phone: data.phone,
					password: data.password,
				});
				if (result.data.code === "0000") {
					// 注册成功自动登录
					localStorage.setItem("isLogin", "true");
					router.push({ name: "Home" });
				} else {
					showToast("注册失败...");
				}
			} catch (error) {
				showToast("发送请求失败!");
			}
		}
	};
	// 返回数据
	const { phone, password, confirmPassword } = toRefs(data);
	return {
		phone,
		password,
		confirmPassword,
		handleRegister,
	};
};
const userLoginEffect = () => {
	const router = useRouter();
	const handleLogin = () => {
		router.push({ name: "Login" });
	};
	return { handleLogin };
};
export default {
	name: "Register",
	components: { Toast },
	setup() {
		const { isShow, toastMessage, showToast } = showToastEffect();
		const { phone, password, confirmPassword, handleRegister } = userRegisterEffect(showToast);
		const { handleLogin } = userLoginEffect();
		return {
			handleLogin,
			handleRegister,
			phone,
			password,
			confirmPassword,
			isShow,
			toastMessage,
		};
	},
};
```

# 参数非空校验

> 不管是登录, 还是注册, 如果 input 框为空, 需要提示用户必填, 只有都填写了, 才会发请求

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202232006132.png#crop=0&crop=0&crop=1&crop=1&id=GEk8m&originHeight=1068&originWidth=1665&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=JRjys&originHeight=1068&originWidth=1665&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# docker 做成公共组件

> 我们发现, 好多页面都用到了 docker, 我们可以把 docker 做成公共组件

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202232023477.png#crop=0&crop=0&crop=1&crop=1&id=QNuTY&originHeight=774&originWidth=1542&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=xPZQv&originHeight=774&originWidth=1542&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 新建`src\components\Docker.vue`, 把原来的代码粘过去, 稍作修改即可

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202232026139.png#crop=0&crop=0&crop=1&crop=1&id=ikUvg&originHeight=445&originWidth=1385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nnFxK&originHeight=445&originWidth=1385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 附近店铺数据调用接口

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202232020463.png#crop=0&crop=0&crop=1&crop=1&id=ysIcv&originHeight=684&originWidth=411&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=gBRpx&originHeight=684&originWidth=411&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 之前我们已经把数据进行了抽离, 现在我们需要做一个接口
>
> 编写接口 [https://www.fastmock.site](https://www.fastmock.site)

```json
{
	"code": "0000",
	"data": [
		{
			"id": 1,
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
			"title": "沃尔玛-1",
			"tags": ["月售1万+", "起送¥1", "基础运费¥1"],
			"notice": "VIP尊享满89元减4元运费券（每月1张）"
		},
		{
			"id": 2,
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
			"title": "沃尔玛-2",
			"tags": ["月售2万+", "起送¥2", "基础运费¥2"],
			"notice": "VIP尊享满89元减4元运费券（每月2张）"
		},
		{
			"id": 3,
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
			"title": "沃尔玛-3",
			"tags": ["月售3万+", "起送¥3", "基础运费¥3"],
			"notice": "VIP尊享满89元减4元运费券（每月3张）"
		},
		{
			"id": 4,
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
			"title": "沃尔玛-4",
			"tags": ["月售4万+", "起送¥4", "基础运费¥4"],
			"notice": "VIP尊享满89元减4元运费券（每月4张）"
		},
		{
			"id": 5,
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
			"title": "沃尔玛-5",
			"tags": ["月售5万+", "起送¥5", "基础运费¥5"],
			"notice": "VIP尊享满89元减4元运费券（每月5张）"
		}
	],
	"desc": "成功"
}
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203292116809.png#crop=0&crop=0&crop=1&crop=1&id=bVWGh&originHeight=1195&originWidth=1598&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=z84Bq&originHeight=1195&originWidth=1598&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 开始编写`src\views\home\Nearby.vue`的代码

```vue
<template>
	<!-- ... -->
	<Toast v-if="isShow" :message="toastMessage" />
</template>
<script>
import { ref } from "vue";
import { get } from "@/utils/request";
import Toast, { showToastEffect } from "@/components/Toast.vue";
const useNearbyEffect = (showToast) => {
	const nearbyItems = ref([]);
	const getNearbyItems = async () => {
		try {
			// 走接口, 获取数据
			const result = await get("/home/nearby");
			if (result.data.code === "0000") {
				console.log(result);
				nearbyItems.value = result.data.data;
			} else {
				showToast("获取数据失败");
			}
		} catch (error) {
			showToast("请求接口失败!!!");
		}
	};
	getNearbyItems();
	return { nearbyItems };
};

export default {
	name: "Nearby",
	components: { Toast },
	setup() {
		const { isShow, toastMessage, showToast } = showToastEffect();
		const { nearbyItems } = useNearbyEffect(showToast);
		return { nearbyItems, toastMessage, isShow };
	},
};
</script>
<style lang="scss" scoped>
// ...
</style>
```

> `src\utils\request.js`也要进行相应的修改, 返回 get 方法

```javascript
// src\utils\request.js
import axios from "axios";
// 定义post请求体的数据格式为json
axios.defaults.headers.post["Content-Type"] = "application/json";
// 定义域名
axios.defaults.baseURL = "https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api";

// 定义post请求
const post = (url, data = {}) => {
	return new Promise((resolve, reject) => {
		axios
			.post(url, data)
			.then((response) => {
				resolve(response);
			})
			.catch((error) => {
				reject(error);
			});
	});
};
// 定义get请求
const get = (url, params = {}) => {
	return new Promise((resolve, reject) => {
		axios
			.get(url, { params })
			.then((response) => {
				resolve(response);
			})
			.catch((error) => {
				reject(error);
			});
	});
};
export { post, get };
```

> 最终的一个效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202232136712.png#crop=0&crop=0&crop=1&crop=1&id=hYvsE&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=eTA44&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 组件拆分复用

> 经过查看设计稿, 我们发现, 这个组件在两个页面都用到了,

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202240934960.png#crop=0&crop=0&crop=1&crop=1&id=gquFN&originHeight=1160&originWidth=1385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=yiBxH&originHeight=1160&originWidth=1385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们需要把它做成通用形组件
>
> 首先创建路由`src\router\index.js`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202240957322.png#crop=0&crop=0&crop=1&crop=1&id=u67VY&originHeight=434&originWidth=1747&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ps0Km&originHeight=434&originWidth=1747&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 然后编写`src\views\shop\Shop.vue`

```vue
<template>hello world</template>
<script>
export default {
	name: "Shop",
};
</script>
<style lang="scss" scoped></style>
```

> 查看效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202240957424.png#crop=0&crop=0&crop=1&crop=1&id=IJoO3&originHeight=217&originWidth=1219&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=UWTGO&originHeight=217&originWidth=1219&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们可以把路由改成异步加载路由,`src\router\index.js`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241000989.png#crop=0&crop=0&crop=1&crop=1&id=S1EUw&originHeight=199&originWidth=773&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=gy4Ap&originHeight=199&originWidth=773&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241001948.png#crop=0&crop=0&crop=1&crop=1&id=dsuXX&originHeight=1102&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=AMN2n&originHeight=1102&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 测试一下, 看看效果, 发现没有问题
>
> 接下来就可以对 nearby 附近店铺做拆分了
>
> 我们可以做一个公共组件, `src\components\ShopInfo.vue`
>
> 先把`src\views\home\Nearby.vue` html 和 css 代码拆离

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241034867.png#crop=0&crop=0&crop=1&crop=1&id=NrXBf&originHeight=969&originWidth=1957&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=mHIz8&originHeight=969&originWidth=1957&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241036738.png#crop=0&crop=0&crop=1&crop=1&id=cvZxq&originHeight=817&originWidth=1571&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ydJLq&originHeight=817&originWidth=1571&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> `src\components\ShopInfo.vue` 代码如下

```vue
<template>
	<div class="shop-info">
		<div class="shop-info__left">
			<img :src="item.imgUrl" alt="" class="shop-info__left__img" />
		</div>
		<div class="shop-info__right">
			<div class="shop-info__right__title">
				{{ item.title }}
			</div>
			<div class="shop-info__right__tags">
				<div v-for="(tagItem, tagIndex) of item.tags" :key="tagIndex" class="shop-info__right__tags__item">
					{{ tagItem }}
				</div>
			</div>
			<div class="shop-info__right__notice">
				{{ item.notice }}
			</div>
		</div>
	</div>
</template>
<script>
export default {
	name: "ShopInfo",
	props: ["item"],
};
</script>
<style lang="scss" scoped>
@import "../style/variables.scss";
@import "../style/mixins.scss";
.shop-info {
	display: flex;
	margin-bottom: 12rem;
	&__left {
		margin-right: 16rem;
		&__img {
			width: 56rem;
			height: 56rem;
		}
	}
	&__right {
		border-bottom: 1rem solid #f1f1f1;
		flex-grow: 1;
		&__title {
			font-family: PingFangSC-Regular;
			font-size: 16rem;
			color: $content-fontcolor;
			margin-bottom: 8rem;
		}
		&__tags {
			margin-bottom: 8rem;
			display: flex;
			&__item {
				font-family: PingFangSC-Regular;
				font-size: 13rem;
				color: $content-fontcolor;
				margin-right: 16rem;
			}
		}
		&__notice {
			font-family: PingFangSC-Regular;
			font-size: 13rem;
			color: #e93b3b;
			margin-bottom: 12rem;
		}
	}
}
</style>
```

> 注意: `src\views\home\Nearby.vue`有几个地方需要修改

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241037975.png#crop=0&crop=0&crop=1&crop=1&id=jptvp&originHeight=293&originWidth=1753&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=izOaC&originHeight=293&originWidth=1753&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241037525.png#crop=0&crop=0&crop=1&crop=1&id=hySMU&originHeight=414&originWidth=1754&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=hvTPv&originHeight=414&originWidth=1754&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202282035613.png#crop=0&crop=0&crop=1&crop=1&id=xmta5&originHeight=648&originWidth=1248&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=QS5mJ&originHeight=648&originWidth=1248&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 拆离后的代码可以正常显示

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241038905.png#crop=0&crop=0&crop=1&crop=1&id=qwm49&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=GngXI&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 接下来就可以考虑复用的问题了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202240934960.png#crop=0&crop=0&crop=1&crop=1&id=BeP5Q&originHeight=1160&originWidth=1385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=KWs3W&originHeight=1160&originWidth=1385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们开始编写`src\views\shop\Shop.vue`

```vue
<template>
	<ShopInfo :item="item" />
</template>
<script>
import ShopInfo from "@/components/ShopInfo.vue";
export default {
	name: "Shop",
	components: { ShopInfo },
	setup() {
		const item = {
			id: 1,
			imgUrl: "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
			title: "沃尔玛-1",
			tags: ["月售1万+", "起送¥1", "基础运费¥1"],
			notice: "VIP尊享满89元减4元运费券（每月1张）",
		};
		return { item };
	},
};
</script>
<style lang="scss" scoped></style>
```

> 经过测试, 发现太靠上了...

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241050103.png#crop=0&crop=0&crop=1&crop=1&id=XlGGz&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kefQA&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们可以稍微调一下样式

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241054470.png#crop=0&crop=0&crop=1&crop=1&id=jCt3r&originHeight=491&originWidth=1569&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=GYSIw&originHeight=491&originWidth=1569&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241054381.png#crop=0&crop=0&crop=1&crop=1&id=ODP3N&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=bjo1v&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们对比后发现, 首页是有横线的, 而详情页是没有横线的

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241055188.png#crop=0&crop=0&crop=1&crop=1&id=Q2Xgu&originHeight=1147&originWidth=1524&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=o28fV&originHeight=1147&originWidth=1524&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们可以定义一个类名,`shop-info__right--borderd`, 来决定是有包含横线

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241229110.png#crop=0&crop=0&crop=1&crop=1&id=noSEA&originHeight=699&originWidth=907&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=koqGW&originHeight=699&originWidth=907&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 把类改成对象的形式

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241231905.png#crop=0&crop=0&crop=1&crop=1&id=DIJsq&originHeight=443&originWidth=933&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zT6du&originHeight=443&originWidth=933&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 很明显, 要不要显示横线, 取决于`shop-info__right--borderd`是否为 true
>
> 我们可以用一个变量`showBorder`来表示

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241238257.png#crop=0&crop=0&crop=1&crop=1&id=vKcbc&originHeight=748&originWidth=1908&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ZEYHl&originHeight=748&originWidth=1908&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 在调用组件的时候可以传入`showBorder`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241239400.png#crop=0&crop=0&crop=1&crop=1&id=Xwcwp&originHeight=269&originWidth=600&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=cJ11h&originHeight=269&originWidth=600&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241239463.png#crop=0&crop=0&crop=1&crop=1&id=E1AtH&originHeight=510&originWidth=602&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=r0ZjE&originHeight=510&originWidth=602&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 边框的展示没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241243094.png#crop=0&crop=0&crop=1&crop=1&id=MIsQf&originHeight=1136&originWidth=1417&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=etAeP&originHeight=1136&originWidth=1417&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 商家详情页 header

> 需要两个字体图标, 放大镜我们已经有了, 剩下的搜索`back`即可

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241409216.png#crop=0&crop=0&crop=1&crop=1&id=iBUi2&originHeight=397&originWidth=980&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=AuSgu&originHeight=397&originWidth=980&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 替换代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241409601.png#crop=0&crop=0&crop=1&crop=1&id=qOoYH&originHeight=283&originWidth=1028&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=RSpI5&originHeight=283&originWidth=1028&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写 html 代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241410238.png#crop=0&crop=0&crop=1&crop=1&id=wV7wZ&originHeight=602&originWidth=787&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=TF35J&originHeight=602&originWidth=787&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<div class="container__header">
	<!-- src\views\shop\Shop.vue -->
	<div class="container__header__left">
		<span class="container__header__left__iconfont"> &#xe679; </span>
	</div>
	<div class="container__header__right">
		<span class="container__header__right__iconfont">&#xe62d;</span>
		<input type="text" class="container__header__right__input" placeholder="请输入商品名称搜索" />
	</div>
</div>
```

> 接下来就是调节样式, 不知道为什么 scss 不能用了, 我还是用 css 的语法吧

```
// src\views\shop\Shop.vue
.container {
	padding: 0 18rem;
}
.container__header {
	width: 100%;
	height: 32px;
	margin-top: 16px;
	margin-bottom: 16px;
	display: flex;
	justify-content: space-between;
	align-items: center;
}
.container__header__left__iconfont {
	color: #b6b6b6;
	font-size: 20px;
}
.container__header__right {
	position: relative;
}
.container__header__right__iconfont {
	color: #b7b7b7;
	font-size: 18px;
	position: absolute;
	top: 6px;
	left: 16px;
}
.container__header__right__input {
	width: 310px;
	height: 32px;
	background: #f5f5f5;
	border-radius: 16px;
	padding: 0 44px;
	box-sizing: border-box;
	font-family: PingFangSC-Regular;
	font-size: 14px;
	color: #333333;
	line-height: 16px;
}
```

> 最终的一个效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241500247.png#crop=0&crop=0&crop=1&crop=1&id=XtTAF&originHeight=136&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Pf54e&originHeight=136&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 记得把 px 改成 rem

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241509350.png#crop=0&crop=0&crop=1&crop=1&id=vm3AE&originHeight=848&originWidth=628&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=eplxu&originHeight=848&originWidth=628&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 点击返回按钮, 返回上一页

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241511466.png#crop=0&crop=0&crop=1&crop=1&id=ARyIa&originHeight=308&originWidth=546&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=G5Qnj&originHeight=308&originWidth=546&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241515700.png#crop=0&crop=0&crop=1&crop=1&id=gUkbt&originHeight=291&originWidth=836&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zHcFX&originHeight=291&originWidth=836&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241516912.png#crop=0&crop=0&crop=1&crop=1&id=zuZ8D&originHeight=855&originWidth=997&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=GMajF&originHeight=855&originWidth=997&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 点击首页店铺, 跳转到店铺页

> 点击店铺可以跳转到相应的页面

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241523036.png#crop=0&crop=0&crop=1&crop=1&id=krBJ7&originHeight=792&originWidth=1350&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EkUWQ&originHeight=792&originWidth=1350&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 可以使用`router-link`, 它会在标签上包一层 a 标签

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241527869.png#crop=0&crop=0&crop=1&crop=1&id=ZW7e1&originHeight=277&originWidth=747&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=RHsRi&originHeight=277&originWidth=747&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 因为是超链接, 所以会有下划线, 可以设置对应的样式

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241527330.png#crop=0&crop=0&crop=1&crop=1&id=JUslv&originHeight=331&originWidth=443&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=pUFQh&originHeight=331&originWidth=443&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241530578.png#crop=0&crop=0&crop=1&crop=1&id=fYwgt&originHeight=634&originWidth=778&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nrgaP&originHeight=634&originWidth=778&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 路由传参

> 我们现在点击哪个商店都会调转到商店页面, 但是实际上, 不同的商店, id 是不同的, 我们需要把 id 传过去, 方便后期去调用 ajax
>
> 我们可以设置路由, 在跳转的时候, 携带参数

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241539948.png#crop=0&crop=0&crop=1&crop=1&id=PBfhW&originHeight=233&originWidth=658&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=SzyQA&originHeight=233&originWidth=658&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 页面的跳转也要做相应的变化

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241545700.png#crop=0&crop=0&crop=1&crop=1&id=xTfd6&originHeight=405&originWidth=707&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=fnEvE&originHeight=405&originWidth=707&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们会发现, 现在点击不同的商店, 调转的是不同的路由

# 创建并请求商家接口

> [https://www.fastmock.site/](https://www.fastmock.site/)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202241630212.png#crop=0&crop=0&crop=1&crop=1&id=Hed97&originHeight=297&originWidth=1577&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=vE05G&originHeight=297&originWidth=1577&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```json
{
	"code": "0000",
	"data": {
		"id": 1,
		"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
		"title": "沃尔玛-1",
		"tags": ["月售1万+", "起送¥1", "基础运费¥1"],
		"notice": "VIP尊享满89元减4元运费券（每月1张）"
	},
	"desc": "成功"
}
{
	"code": "0000",
	"data": {
		"id": 2,
		"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
		"title": "沃尔玛-2",
		"tags": ["月售2万+", "起送¥2", "基础运费¥2"],
		"notice": "VIP尊享满89元减4元运费券（每月2张）"
	},
	"desc": "成功"
}
{
	"code": "0000",
	"data": {
		"id": 3,
		"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
		"title": "沃尔玛-3",
		"tags": ["月售3万+", "起送¥3", "基础运费¥3"],
		"notice": "VIP尊享满89元减4元运费券（每月3张）"
	},
	"desc": "成功"
}

{
	"code": "0000",
	"data": {
		"id": 4,
		"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
		"title": "沃尔玛-4",
		"tags": ["月售4万+", "起送¥4", "基础运费¥4"],
		"notice": "VIP尊享满89元减4元运费券（每月4张）"
	},
	"desc": "成功"
}
{
	"code": "0000",
	"data": {
		"id": 5,
		"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202211407079.png",
		"title": "沃尔玛-5",
		"tags": ["月售5万+", "起送¥5", "基础运费¥5"],
		"notice": "VIP尊享满89元减4元运费券（每月5张）"
	},
	"desc": "成功"
}
```

> 最终的接口地址
>
> 店铺详情 1: [https://www.fastmock.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin/api/shop/1](https://www.fastmock.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin/api/shop/1)
>
> 店铺详情 2: [https://www.fastmock.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin/api/shop/2](https://www.fastmock.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin/api/shop/2)
>
> 店铺详情 3: [https://www.fastmock.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin/api/shop/3](https://www.fastmock.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin/api/shop/3)
>
> 店铺详情 4: [https://www.fastmock.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin/api/shop/4](https://www.fastmock.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin/api/shop/4)
>
> 店铺详情 5: [https://www.fastmock.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin/api/shop/5](https://www.fastmock.site/mock/e764a900fc6cdbc199fb33651082d60f/weixin/api/shop/5)

> 我们需要页面的数据是请求接口来的, 所以需要编写请求接口的代码

```javascript
// src\views\shop\Shop.vue
import { useRouter } from "vue-router";
import ShopInfo from "@/components/ShopInfo.vue";
import { ref } from "vue";
import { get } from "@/utils/request";
export default {
	name: "Shop",
	components: { ShopInfo },
	setup() {
		const item = ref({});
		const router = useRouter();
		const getItemData = async () => {
			const result = await get("/api/shop/1");
			item.value = result.data.data;
		};
		getItemData();
		const handleBackClick = () => {
			router.back();
		};
		return { item, handleBackClick };
	},
};
```

> 拆分代码, 让 setup 的逻辑尽量精简

```javascript
// src\views\shop\Shop.vue
import { ref } from "vue";
import { useRouter } from "vue-router";
import ShopInfo from "@/components/ShopInfo.vue";
import { get } from "@/utils/request";

const useShopInfoEffect = () => {
	const item = ref({});
	const getItemData = async () => {
		const result = await get("/api/shop/1");
		item.value = result.data.data;
	};
	return { item, getItemData };
};

const useBackRouterEffect = () => {
	const router = useRouter();
	const handleBackClick = () => {
		router.back();
	};
	return handleBackClick;
};
export default {
	name: "Shop",
	components: { ShopInfo },
	setup() {
		const { item, getItemData } = useShopInfoEffect();
		const handleBackClick = useBackRouterEffect();
		getItemData();
		return { item, handleBackClick };
	},
};
```

# 通过参数动态获取数据

> 我们之前的请求接口是数据是写死的, 访问的都是 id 为 1 的数据, 可不可以把 url 里面的 id 值获取到, 拼接动态的接口访问地址呢?

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251301789.png#crop=0&crop=0&crop=1&crop=1&id=xUxTZ&originHeight=250&originWidth=790&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=wkUrP&originHeight=250&originWidth=790&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251259660.png#crop=0&crop=0&crop=1&crop=1&id=RQL0T&originHeight=378&originWidth=873&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nEgKw&originHeight=378&originWidth=873&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 防止裂图

> 因为我们的数据是 ajax 获取到的, 如果网速不好的情况下, 可能会出现加载不到图片, 导致出现裂图的情况, 我们应该让数据加载完了再渲染页面

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251304920.png#crop=0&crop=0&crop=1&crop=1&id=dvwCb&originHeight=62&originWidth=852&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Xa5k4&originHeight=62&originWidth=852&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 商铺详情页内容区

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251321044.png#crop=0&crop=0&crop=1&crop=1&id=FeBPE&originHeight=692&originWidth=403&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nboSa&originHeight=692&originWidth=403&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们可以创建一个内容区的组件 `src\views\shop\Content.vue`, 同时给一些样式来确定轮廓

```vue
<template>
	<div class="content"></div>
</template>
<script>
export default {
	name: "Content",
};
</script>
<style lang="scss" scoped>
.content {
	position: absolute;
	top: 146px;
	bottom: 49px;
	left: 0;
	right: 0;
	background-color: olivedrab;
}
</style>
```

> 注意修改`src\views\shop\Shop.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251337734.png#crop=0&crop=0&crop=1&crop=1&id=IhFmM&originHeight=345&originWidth=870&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=qarlU&originHeight=345&originWidth=870&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251337332.png#crop=0&crop=0&crop=1&crop=1&id=BxENd&originHeight=419&originWidth=805&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jw8Rk&originHeight=419&originWidth=805&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251337938.png#crop=0&crop=0&crop=1&crop=1&id=MNnTs&originHeight=267&originWidth=763&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Sy269&originHeight=267&originWidth=763&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最终的一个效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251337339.png#crop=0&crop=0&crop=1&crop=1&id=AD7Dm&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zicsH&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 开始编写左侧的 html

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251425931.png#crop=0&crop=0&crop=1&crop=1&id=G5y9C&originHeight=554&originWidth=993&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=eJGS7&originHeight=554&originWidth=993&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 然后编写 scss

```
.content {
	// ...
	overflow-y: auto;
	display: flex;
	&__left {
		background-color: #f5f5f5;
		&__item {
			width: 76px;
			height: 40px;
			font-family: PingFangSC-Regular;
			font-size: 14px;
			color: #333333;
			text-align: center;
			line-height: 40px;
			&--active {
				background-color: #fff;
			}
		}
	}
	&__right {
		flex-grow: 1;
		background-color: #fff;
	}
}
```

> 最终的一个效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251426615.png#crop=0&crop=0&crop=1&crop=1&id=dZbHi&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=vniIc&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们继续编写右边的内容, 先编写 html 代码, 用到的图片地址: [https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251443280.png](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251443280.png), 还需要用到两个图标, 搜索 `minus` 和 `plus`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251554049.png#crop=0&crop=0&crop=1&crop=1&id=rmtFm&originHeight=942&originWidth=1472&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=q8hhp&originHeight=942&originWidth=1472&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251444524.png#crop=0&crop=0&crop=1&crop=1&id=NPdCc&originHeight=943&originWidth=1126&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jhPt6&originHeight=943&originWidth=1126&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<div class="content__right">
	<div class="content__right__item">
		<div class="content__right__item__left">
			<img
				src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png"
				alt=""
				class="content__right__item__left__image"
			/>
		</div>
		<div class="content__right__item__right">
			<div class="content__right__item__right__top">番茄250g/份</div>
			<div class="content__right__item__right__middle">月售10件</div>
			<div class="content__right__item__right__bottom">
				<div class="content__right__item__right__bottom__price">
					<div class="content__right__item__right__bottom__price__promotion">¥33.6</div>
					<div class="content__right__item__right__bottom__price__original">¥33.6</div>
				</div>
				<div class="content__right__item__right__bottom__count">
					<span class="content__right__item__right__bottom__count__minus-iconfont"> &#xe677; </span>
					<span class="content__right__item__right__bottom__count__number"> 88 </span>
					<span class="content__right__item__right__bottom__count__plus-iconfont"> &#xe7e0; </span>
				</div>
			</div>
		</div>
	</div>
</div>
```

> 阶段性成果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251443792.png#crop=0&crop=0&crop=1&crop=1&id=VgBsc&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=rvIch&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 接下来编写 scss

```
&__right {
	flex-grow: 1;
	background-color: #fff;
	&__item {
		padding: 0 18px 0 16px;
		display: flex;
		&__left {
			margin-right: 16px;
			&__image {
				width: 68px;
				height: 68px;
			}
		}
		&__right {
			flex-grow: 1;
			&__top {
				font-family: PingFangSC-Medium;
				font-size: 14px;
				color: #333333;
				margin-bottom: 8px;
			}
			&__middle {
				font-family: PingFangSC-Regular;
				font-size: 12px;
				color: #333333;
				line-height: 16px;
				margin-bottom: 8px;
			}
			&__bottom {
				display: flex;
				align-items: center;
				justify-content: space-between;
				&__price {
					display: flex;
					align-items: center;
					&__promotion {
						font-family: PingFangSC-Semibold;
						font-size: 14px;
						color: #e93b3b;
						line-height: 20px;
						margin-right: 8px;
						&::first-letter {
							font-size: 12px;
						}
					}
					&__original {
						font-family: PingFangSC-Regular;
						font-size: 10px;
						color: #999999;
						line-height: 20px;
						&::first-letter {
							font-size: 12px;
						}
					}
				}
				&__count {
					display: flex;
					align-items: center;
					&__minus-iconfont {
						color: #666666;
						font-size: 20px;
					}
					&__number {
						font-family: PingFangSC-Regular;
						font-size: 14px;
						color: #333333;
						margin-left: 10px;
						margin-right: 10px;
					}
					&__plus-iconfont {
						font-size: 17px;
						color: #0091ff;
					}
				}
			}
		}
	}
}
```

> 阶段性成果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251601726.png#crop=0&crop=0&crop=1&crop=1&id=iCCeK&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=yJV60&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 设计稿中有边框

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251605049.png#crop=0&crop=0&crop=1&crop=1&id=nELEo&originHeight=572&originWidth=461&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EcgtD&originHeight=572&originWidth=461&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251605743.png#crop=0&crop=0&crop=1&crop=1&id=I3q4b&originHeight=592&originWidth=746&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=LNEqs&originHeight=592&originWidth=746&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们多复制几个, 看看效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251607700.png#crop=0&crop=0&crop=1&crop=1&id=tCw6f&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=huGIh&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 距离下边是有距离的

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251606366.png#crop=0&crop=0&crop=1&crop=1&id=MsxON&originHeight=159&originWidth=475&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=bzu2m&originHeight=159&originWidth=475&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251608560.png#crop=0&crop=0&crop=1&crop=1&id=NZSJO&originHeight=353&originWidth=667&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jWcXA&originHeight=353&originWidth=667&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251608515.png#crop=0&crop=0&crop=1&crop=1&id=zIXPy&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=momDT&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 还有一个问题, 数量过多时, 下滑的滚动条方式不对

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251610015.png#crop=0&crop=0&crop=1&crop=1&id=A8HCQ&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=RsuVW&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251612288.png#crop=0&crop=0&crop=1&crop=1&id=h7DiW&originHeight=731&originWidth=1601&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=cPn5e&originHeight=731&originWidth=1601&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 代码优化

> 1. 理论上, 只要是背景颜色值或者字体颜色值, 使用超过两次以上, 都可以封装成 scss 变量, 就是不好起名字
> 2. 所有的 px 要改成 rem
> 3. 商品标题如果字数过多, 会影响页面美观

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251643860.png#crop=0&crop=0&crop=1&crop=1&id=S0qc4&originHeight=324&originWidth=736&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=SoJ5V&originHeight=324&originWidth=736&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251643944.png#crop=0&crop=0&crop=1&crop=1&id=cstvi&originHeight=401&originWidth=568&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=bmXuV&originHeight=401&originWidth=568&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 商铺详情左边数据抽离

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251830579.png#crop=0&crop=0&crop=1&crop=1&id=AcDv5&originHeight=661&originWidth=374&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=BJ8zw&originHeight=661&originWidth=374&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 定义数据

```javascript
// src\views\shop\Content.vue
export default {
	name: "Content",
	setup() {
		const leftItems = [
			{
				name: "all",
				text: "全部商品",
			},
			{
				name: "seckill",
				text: "秒杀",
			},
			{
				name: "fruit",
				text: "新鲜水果",
			},
			{
				name: "snacks",
				text: "休闲食品",
			},
			{
				name: "vegetable",
				text: "时令蔬菜",
			},
			{
				name: "meat",
				text: "肉蛋家禽",
			},
		];
		return { leftItems };
	},
};
```

> 遍历展示 html

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251842293.png#crop=0&crop=0&crop=1&crop=1&id=Eiywi&originHeight=604&originWidth=803&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=j30o7&originHeight=604&originWidth=803&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们发现, 所有都是高亮的...

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251843036.png#crop=0&crop=0&crop=1&crop=1&id=EoIDr&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=bFJfP&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 商铺详情页点击高亮

> 需要对 class 进行动态的判断

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251844231.png#crop=0&crop=0&crop=1&crop=1&id=UTAcl&originHeight=474&originWidth=851&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Eihog&originHeight=474&originWidth=851&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们需要定义一个变量`currentItemName`, 来存储当前的名字

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251848986.png#crop=0&crop=0&crop=1&crop=1&id=Suwsa&originHeight=243&originWidth=489&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=tVxGc&originHeight=243&originWidth=489&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251847835.png#crop=0&crop=0&crop=1&crop=1&id=jyjqi&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EcbCo&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 实现点击切换效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251852744.png#crop=0&crop=0&crop=1&crop=1&id=U7ebP&originHeight=434&originWidth=799&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=a0Jza&originHeight=434&originWidth=799&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251853975.png#crop=0&crop=0&crop=1&crop=1&id=vbbay&originHeight=567&originWidth=776&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=lWsSR&originHeight=567&originWidth=776&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 发现没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251853256.png#crop=0&crop=0&crop=1&crop=1&id=C6u7Z&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=JNGCb&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 禁用双击缩放

> 我们发现, 如果双击页面, 页面会放大

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261103224.png#crop=0&crop=0&crop=1&crop=1&id=ACdfO&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=saKYE&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 修改`public\index.html`的代码, 加上相关的设置

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261109028.png#crop=0&crop=0&crop=1&crop=1&id=C6HYI&originHeight=411&originWidth=1197&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=xi3rp&originHeight=411&originWidth=1197&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
```

# 抽离店铺内容区数据

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261124433.png#crop=0&crop=0&crop=1&crop=1&id=mMNaK&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=MrNxe&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 定义`rightItems`, 来存储数据

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261132889.png#crop=0&crop=0&crop=1&crop=1&id=IPxGJ&originHeight=1070&originWidth=1160&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=F0fjT&originHeight=1070&originWidth=1160&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```javascript
[
	{
		id: 1,
		name: "全部-番茄150g/份",
		imgUrl: "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png",
		sales: 1,
		promotionPrice: 1.6,
		originalPrice: 1.6,
	},
	{
		id: 2,
		name: "全部-番茄250g/份",
		imgUrl: "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527853.png",
		sales: 2,
		promotionPrice: 2.6,
		originalPrice: 2.6,
	},
	{
		id: 3,
		name: "全部-番茄350g/份",
		imgUrl: "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527922.png",
		sales: 3,
		promotionPrice: 3.6,
		originalPrice: 3.6,
	},
	{
		id: 4,
		name: "全部-番茄450g/份",
		imgUrl: "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261530259.png",
		sales: 4,
		promotionPrice: 4.6,
		originalPrice: 4.6,
	},
];
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261132416.png#crop=0&crop=0&crop=1&crop=1&id=kamo3&originHeight=58&originWidth=908&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ILP08&originHeight=58&originWidth=908&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 遍历数据

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261158932.png#crop=0&crop=0&crop=1&crop=1&id=DkfOk&originHeight=555&originWidth=715&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=p2MLf&originHeight=555&originWidth=715&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261158749.png#crop=0&crop=0&crop=1&crop=1&id=X45d2&originHeight=568&originWidth=1090&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=cda12&originHeight=568&originWidth=1090&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 阶段性成果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261159586.png#crop=0&crop=0&crop=1&crop=1&id=gqGKF&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jCc5s&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 制作店铺内容区接口

> 接口需要两个参数, 一个是店铺的 id, 一个是左侧 tab 区的名字

```
/api/shop/1/tab/all

/api/shop/2/tab/seckill
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261225112.png#crop=0&crop=0&crop=1&crop=1&id=mGIZ0&originHeight=332&originWidth=1071&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=WLNlW&originHeight=332&originWidth=1071&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 对应的 json 数据

```json
{
	"code": "0000",
	"data": [
		{
			"id": 1,
			"name": "肉蛋家禽-番茄150g/份",
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251443280.png",
			"sales": 1,
			"promotionPrice": 1.6,
			"originalPrice": 1.6
		},
		{
			"id": 2,
			"name": "肉蛋家禽-番茄250g/份",
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251443280.png",
			"sales": 2,
			"promotionPrice": 2.6,
			"originalPrice": 2.6
		},
		{
			"id": 3,
			"name": "肉蛋家禽-番茄350g/份",
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251443280.png",
			"sales": 3,
			"promotionPrice": 3.6,
			"originalPrice": 3.6
		},
		{
			"id": 4,
			"name": "肉蛋家禽-番茄450g/份",
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202251443280.png",
			"sales": 4,
			"promotionPrice": 4.6,
			"originalPrice": 4.6
		}
	],
	"desc": "成功"
}
```

> 所有接口地址:
>
> 店铺 1 内容区 全部商品: [https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/all](https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/all)
>
> 店铺 1 内容区 秒杀: [https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/seckill](https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/seckill)
>
> 店铺 1 内容区 新鲜水果: [https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/fruit](https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/fruit)
>
> 店铺 1 内容区 休闲食品: [https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/snacks](https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/snacks)
>
> 店铺 1 内容区 时令蔬菜: [https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/vegetable](https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/vegetable)
>
> 店铺 1 内容区 肉蛋家禽: [https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/meat](https://www.fastmock.site/mock/65fd811567052bc43a50412985949ab6/api/shop/1/tab/meat)
>
> 编写调用接口的代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261248574.png#crop=0&crop=0&crop=1&crop=1&id=IDbNA&originHeight=850&originWidth=1041&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Q5B8Y&originHeight=850&originWidth=1041&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 可以正常打印
>
> 接下来替换原来抽离出来的数据

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261250145.png#crop=0&crop=0&crop=1&crop=1&id=A8k4M&originHeight=927&originWidth=1036&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=uL9qT&originHeight=927&originWidth=1036&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 发现没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261251942.png#crop=0&crop=0&crop=1&crop=1&id=PcXYX&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=a353t&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 实现左侧和右侧的联动

> 点击左侧, 右侧的内容区跟着变化

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261255796.png#crop=0&crop=0&crop=1&crop=1&id=jnoUf&originHeight=846&originWidth=1077&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=dlhtm&originHeight=846&originWidth=1077&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 发现没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261256741.png#crop=0&crop=0&crop=1&crop=1&id=UrHGE&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=CDjAN&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 商铺详情内容区, 代码拆离

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261513688.png#crop=0&crop=0&crop=1&crop=1&id=lSHYR&originHeight=479&originWidth=1189&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=RPYAD&originHeight=479&originWidth=1189&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261514112.png#crop=0&crop=0&crop=1&crop=1&id=BTjhF&originHeight=333&originWidth=1066&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=tZP6D&originHeight=333&originWidth=1066&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261514077.png#crop=0&crop=0&crop=1&crop=1&id=Zg2ae&originHeight=557&originWidth=1125&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=s6CPP&originHeight=557&originWidth=1125&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261515265.png#crop=0&crop=0&crop=1&crop=1&id=iEcae&originHeight=322&originWidth=1115&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=cuq5g&originHeight=322&originWidth=1115&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261515821.png#crop=0&crop=0&crop=1&crop=1&id=bXWpF&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=whpXd&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 帮大家找了不同的图片
>
> [https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png)
>
> [https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527853.png](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527853.png)
>
> [https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527922.png](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527922.png)
>
> 我们更新一下接口, 参考代码

```json
{
	"code": "0000",
	"data": [
		{
			"id": 1,
			"name": "全部-番茄150g/份",
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png",
			"sales": 1,
			"promotionPrice": 1.6,
			"originalPrice": 1.6
		},
		{
			"id": 2,
			"name": "全部-番茄250g/份",
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527853.png",
			"sales": 2,
			"promotionPrice": 2.6,
			"originalPrice": 2.6
		},
		{
			"id": 3,
			"name": "全部-番茄350g/份",
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527922.png",
			"sales": 3,
			"promotionPrice": 3.6,
			"originalPrice": 3.6
		},
		{
			"id": 4,
			"name": "全部-番茄450g/份",
			"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261530259.png",
			"sales": 4,
			"promotionPrice": 4.6,
			"originalPrice": 4.6
		}
	],
	"desc": "成功"
}
```

> 经过测试, 效果没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261535221.png#crop=0&crop=0&crop=1&crop=1&id=nhut5&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Sf83W&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 商铺详情购物车

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261535514.png#crop=0&crop=0&crop=1&crop=1&id=dfs8L&originHeight=317&originWidth=481&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=vDLET&originHeight=317&originWidth=481&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 新建组件`src\views\shop\Cart.vue`

```vue
<template>
	<div class="cart">hello world</div>
</template>
<script>
export default {
	name: "Cart",
};
</script>
<style lang="scss" scoped>
.cart {
	position: fixed;
	left: 0;
	right: 0;
	bottom: 0;
	height: 49rem;
	background-color: olivedrab;
}
</style>
```

> 在`src\views\shop\Shop.vue`使用组件

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261548118.png#crop=0&crop=0&crop=1&crop=1&id=WjvB3&originHeight=993&originWidth=1057&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=QK5VE&originHeight=993&originWidth=1057&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 阶段性成果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261553676.png#crop=0&crop=0&crop=1&crop=1&id=H0sgH&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=w4OVf&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写 html 代码, 购物车图片地址:
>
> [https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261637089.png](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261637089.png)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261643395.png#crop=0&crop=0&crop=1&crop=1&id=f4j5s&originHeight=715&originWidth=1150&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=i9FL0&originHeight=715&originWidth=1150&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<div class="cart">
	<div class="cart__left">
		<div class="cart__left__icon">
			<img
				src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261637089.png"
				alt=""
				class="cart__left__icon__image"
			/>
			<span class="cart__left__icon__number">1</span>
		</div>
		<div class="cart__left__count">总计: <span class="cart__left__count__price">¥128</span></div>
	</div>
	<div class="cart__right">去结算</div>
</div>
```

> 开始给样式

```
// src\views\shop\Cart.vue
.cart {
	box-shadow: 0 -1px 1px 0 #f1f1f1;
	position: fixed;
	left: 0;
	right: 0;
	bottom: 0;
	height: 49rem;
	// background-color: olivedrab;
	display: flex;
	justify-content: space-between;
	&__left {
		display: flex;
		align-items: center;
		&__icon {
			position: relative;
			margin-left: 24px;
			margin-right: 32px;
			&__image {
				width: 28px;
				height: 26px;
			}
			&__number {
				display: block;
				width: 20px;
				height: 20px;
				background: #e93b3b;
				border-radius: 100%;
				font-family: PingFangSC-Medium;
				font-size: 16px;
				transform: scale(0.5, 0.5);
				transform-origin: center top;
				color: #ffffff;
				text-align: center;
				position: absolute;
				right: -10px;
				top: -4px;
			}
		}
		&__count {
			display: flex;
			align-items: center;
			font-family: PingFangSC-Regular;
			font-size: 12px;
			color: #333333;
			&__price {
				font-family: PingFangSC-Medium;
				font-size: 18px;
				color: #e93b3b;
			}
		}
	}
	&__right {
		width: 98px;
		height: 49px;
		background-color: #4fb0f9;
		font-family: PingFangSC-Medium;
		font-size: 14px;
		color: #ffffff;
		text-align: center;
		line-height: 49px;
	}
}
```

> 最终的效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261643238.png#crop=0&crop=0&crop=1&crop=1&id=bLcGx&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=VOylD&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 购物车数据

> 数据应该做成全局的, 除了商铺详情页, 还有派送页面, 订单页面, 都有可能用到
>
> 所以需要用到 vuex, 定义的数据结构如下
>
> 最外层是商铺 id, 第二层是商品 id, 第三层是商品信息, count 表示购物数量

```javascript
// src\store\index.js
import { createStore } from "vuex";

export default createStore({
	state: {
		cartData: {
			1: {
				1: {
					count: 0,
				},
				2: {
					count: 1,
				},
				3: {
					count: 2,
				},
				4: {
					count: 3,
				},
			},
		},
	},
	mutations: {},
	actions: {},
	modules: {},
});
```

> 把数量展示到页面

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261818047.png#crop=0&crop=0&crop=1&crop=1&id=ps6ST&originHeight=616&originWidth=1270&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=RadVe&originHeight=616&originWidth=1270&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261819213.png#crop=0&crop=0&crop=1&crop=1&id=Mw9Q9&originHeight=644&originWidth=1025&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zUlTZ&originHeight=644&originWidth=1025&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261820204.png#crop=0&crop=0&crop=1&crop=1&id=YAfVx&originHeight=819&originWidth=1301&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=tdm7t&originHeight=819&originWidth=1301&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271153143.png#crop=0&crop=0&crop=1&crop=1&id=lBFIF&originHeight=559&originWidth=1166&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=yGzin&originHeight=559&originWidth=1166&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261817194.png#crop=0&crop=0&crop=1&crop=1&id=Jkqtr&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=AWuF3&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 当然, cartData 的相关逻辑可以做一个封装

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271202692.png#crop=0&crop=0&crop=1&crop=1&id=ZeuZm&originHeight=725&originWidth=998&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=dVC9w&originHeight=725&originWidth=998&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 购物车隐藏按钮

> 经过对比发现, 如果数量为 0, 其实是不显示减号和数量的

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271239301.png#crop=0&crop=0&crop=1&crop=1&id=aRZRB&originHeight=1126&originWidth=1487&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=q64rD&originHeight=1126&originWidth=1487&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 可以使用`v-show`来判断

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271240741.png#crop=0&crop=0&crop=1&crop=1&id=U5U1G&originHeight=714&originWidth=1721&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=gA9kr&originHeight=714&originWidth=1721&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 购物车数据逻辑完善

> vuex 里面的数据, 是我们写死的, 如果 vuex 里面, 一开始我们什么都没写呢?

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271305332.png#crop=0&crop=0&crop=1&crop=1&id=E167H&originHeight=1047&originWidth=878&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=WhLzf&originHeight=1047&originWidth=878&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271312096.png#crop=0&crop=0&crop=1&crop=1&id=chwQw&originHeight=165&originWidth=816&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Hylhh&originHeight=165&originWidth=816&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 需要使用`?.`语法

```javascript
const user = {
	username: "zhangsan",
	girlfriend: {
		username: "hanmeimei",
	},
};

console.log(user.boyfriend.username);
```

> 使用了`?.`语法, 找不到会返回 undefined, 不会报错

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271317611.png#crop=0&crop=0&crop=1&crop=1&id=xv2i3&originHeight=525&originWidth=1659&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ZpSZQ&originHeight=525&originWidth=1659&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271316435.png#crop=0&crop=0&crop=1&crop=1&id=hNymw&originHeight=667&originWidth=1592&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=j5qoI&originHeight=667&originWidth=1592&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 购物车增加逻辑

> 定义处理增加购物车的函数

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271522507.png#crop=0&crop=0&crop=1&crop=1&id=NR6pO&originHeight=594&originWidth=1674&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=KhBvv&originHeight=594&originWidth=1674&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271522371.png#crop=0&crop=0&crop=1&crop=1&id=HF7gx&originHeight=1040&originWidth=1102&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=t2gEV&originHeight=1040&originWidth=1102&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写函数相关的逻辑

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271610420.png#crop=0&crop=0&crop=1&crop=1&id=VE54r&originHeight=491&originWidth=1194&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=fYZhV&originHeight=491&originWidth=1194&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271633497.png#crop=0&crop=0&crop=1&crop=1&id=rfg14&originHeight=996&originWidth=1189&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=lGorN&originHeight=996&originWidth=1189&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271635824.png#crop=0&crop=0&crop=1&crop=1&id=FVEKN&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=HwsYN&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 加减逻辑的统一

> 其实加和减的逻辑很像, 只是一个`+1`, 一个是`-1`, 参数不同而已, 我们可以合并两个操作的逻辑

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271652831.png#crop=0&crop=0&crop=1&crop=1&id=Ojzo7&originHeight=588&originWidth=1278&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nDdtV&originHeight=588&originWidth=1278&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271652608.png#crop=0&crop=0&crop=1&crop=1&id=rz8sY&originHeight=629&originWidth=1277&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Sskid&originHeight=629&originWidth=1277&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271653364.png#crop=0&crop=0&crop=1&crop=1&id=cOm73&originHeight=1055&originWidth=1052&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=h3gxN&originHeight=1055&originWidth=1052&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 同时, 别忘了修改 vuex

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271655668.png#crop=0&crop=0&crop=1&crop=1&id=HwmCM&originHeight=789&originWidth=997&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=mlBiW&originHeight=789&originWidth=997&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271655969.png#crop=0&crop=0&crop=1&crop=1&id=aiWwe&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ymuou&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 如果减号显示会导致布局变化, 检查一下代码, 让减号和加号的字体大小保持一致, 如果图标看起来不一样大, 去阿里图标库, 放大一下图标

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202204022203536.png#crop=0&crop=0&crop=1&crop=1&id=AMYt5&originHeight=343&originWidth=836&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=o9hl6&originHeight=343&originWidth=836&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 计算总数

> 因为总数需要每次变化都进行计算, 所以可以做成计算属性, 每次数量发生改变, 自动触发计算

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271954036.png#crop=0&crop=0&crop=1&crop=1&id=jfBMb&originHeight=516&originWidth=1224&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=iFq4x&originHeight=516&originWidth=1224&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271955766.png#crop=0&crop=0&crop=1&crop=1&id=ODiNZ&originHeight=303&originWidth=915&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=BoRcj&originHeight=303&originWidth=915&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271955242.png#crop=0&crop=0&crop=1&crop=1&id=rOH1j&originHeight=1280&originWidth=997&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=S2G8P&originHeight=1280&originWidth=997&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271956618.png#crop=0&crop=0&crop=1&crop=1&id=xau7w&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=S8pdt&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 购物车总数样式修改

> 我们的购物车数量, 实际上最多只能容纳 99, 超过三位数, 只能显示两位

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271957103.png#crop=0&crop=0&crop=1&crop=1&id=TPFa1&originHeight=50&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=spPzj&originHeight=50&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202271958600.png#crop=0&crop=0&crop=1&crop=1&id=wgiWO&originHeight=113&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=pw5oy&originHeight=113&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 修改样式

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202272015499.png#crop=0&crop=0&crop=1&crop=1&id=hY8MZ&originHeight=800&originWidth=1008&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=krNa9&originHeight=800&originWidth=1008&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202272014230.png#crop=0&crop=0&crop=1&crop=1&id=E0OK0&originHeight=49&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ElUJ7&originHeight=49&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 计算总价

> 我们能计算总数, 在计算总数的过程中乘以价格就可以计算出总价, 唯一的问题是, 价格并不在 vuex 中, vuex 中, 只保存了 count, 所以我们应该保存尽可能多的商品信息, 以防将来运算会用到

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202272035586.png#crop=0&crop=0&crop=1&crop=1&id=hC7s2&originHeight=561&originWidth=1321&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=HLAZ6&originHeight=561&originWidth=1321&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202272036993.png#crop=0&crop=0&crop=1&crop=1&id=VHhjy&originHeight=519&originWidth=1258&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Tr2NA&originHeight=519&originWidth=1258&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202272036694.png#crop=0&crop=0&crop=1&crop=1&id=KpYxV&originHeight=913&originWidth=1215&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=QXWhC&originHeight=913&originWidth=1215&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过上面的修改, 我们就可以把所有的商品信息, 包括数量和价格, 都写到了 vuex 里面
>
> 这样就可以方便的计算总价了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202272110322.png#crop=0&crop=0&crop=1&crop=1&id=V9KPS&originHeight=639&originWidth=1319&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=L0e4E&originHeight=639&originWidth=1319&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202272110361.png#crop=0&crop=0&crop=1&crop=1&id=dW0zu&originHeight=916&originWidth=1213&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Sujc3&originHeight=916&originWidth=1213&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202272110567.png#crop=0&crop=0&crop=1&crop=1&id=nnHA5&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EtJy0&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 解决一个 bug

> 数量加上去之后, 再减到 0, 会出现 NAN

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202280903013.png#crop=0&crop=0&crop=1&crop=1&id=V4Yq0&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=PSgi0&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 发现, 只要是减法操作, 就会出现问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202280918381.png#crop=0&crop=0&crop=1&crop=1&id=a7FcD&originHeight=1032&originWidth=1241&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zA5uW&originHeight=1032&originWidth=1241&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 漏了一个参数 item(商品信息)

# 删除购物信息

> 如果数量减成 0, 应该从购物车中移除该商品, 如果一个商铺没有任何购物信息, 应该从购物车中移除该商铺

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202280957995.png#crop=0&crop=0&crop=1&crop=1&id=YsH7j&originHeight=1287&originWidth=1061&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=vU6ck&originHeight=1287&originWidth=1061&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 购物车详情列表

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202272112347.png#crop=0&crop=0&crop=1&crop=1&id=PVip2&originHeight=708&originWidth=421&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=hYM6v&originHeight=708&originWidth=421&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 点击加减按钮, 相关的购物车信息, 在下方也会展示
>
> 编写 HTML 和 CSS 代码, 代码我们在`src\views\shop\Content.vue`里面写过, 复制过来稍作修改即可, 主要是改类名

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281434958.png#crop=0&crop=0&crop=1&crop=1&id=cqzDH&originHeight=714&originWidth=1646&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ezoUR&originHeight=714&originWidth=1646&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<div class="cart">
	<div class="cart__detail">
		<div v-for="item of cartItems" :key="item.id" class="cart__detail__item">
			<div class="cart__detail__item__left">
				<img :src="item.imgUrl" alt="" class="cart__detail__item__left__image" />
			</div>
			<div class="cart__detail__item__right">
				<div class="cart__detail__item__right__top">{{ item.name }}</div>
				<!-- <div class="cart__detail__item__right__middle">
            月售{{ item.sales }}件
          </div> -->
				<div class="cart__detail__item__right__bottom">
					<div class="cart__detail__item__right__bottom__price">
						<div class="cart__detail__item__right__bottom__price__promotion">¥{{ item.promotionPrice }}</div>
						<div class="cart__detail__item__right__bottom__price__original">¥{{ item.originalPrice }}</div>
					</div>
					<div class="cart__detail__item__right__bottom__count">
						<span
							@click="
                  () => {
                    changeItemToCart(shopId, item.id, item, -1)
                  }
                "
							v-show="cartData?.[shopId]?.[item.id]?.['count']"
							class="cart__detail__item__right__bottom__count__minus-iconfont"
						>
							&#xe677;
						</span>
						<span
							v-show="cartData?.[shopId]?.[item.id]?.['count']"
							class="cart__detail__item__right__bottom__count__number"
						>
							{{ cartData?.[shopId]?.[item.id]?.['count'] }}
						</span>
						<span
							@click="
                  () => {
                    changeItemToCart(shopId, item.id, item, 1)
                  }
                "
							class="cart__detail__item__right__bottom__count__plus-iconfont"
						>
							&#xe7e0;
						</span>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="cart__count">
		<div class="cart__count__left">
			<div class="cart__count__left__icon">
				<img
					src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261637089.png"
					alt=""
					class="cart__count__left__icon__image"
				/>
				<span class="cart__count__left__icon__number">{{ total }}</span>
			</div>
			<div class="cart__count__left__count">
				总计:
				<span class="cart__count__left__count__price">¥{{ sumPrice }}</span>
			</div>
		</div>
		<div class="cart__count__right">去结算</div>
	</div>
</div>
```

> 完整版的 css 代码

```vue
<style lang="scss" scoped>
// src\views\shop\Cart.vue
@import "../../style/mixins.scss";
.cart {
	&__detail {
		&__item {
			margin: 0 18rem 12rem 16rem;
			display: flex;
			border-bottom: 1rem solid #f1f1f1;
			&__left {
				margin-right: 16rem;
				&__image {
					width: 68rem;
					height: 68rem;
					margin-bottom: 12rem;
				}
			}
			&__right {
				flex-grow: 1;
				&__top {
					@include ellipsis;
					width: 181px;
					font-family: PingFangSC-Medium;
					font-size: 14rem;
					color: #333333;
					margin-bottom: 8rem;
				}
				&__middle {
					font-family: PingFangSC-Regular;
					font-size: 12rem;
					color: #333333;
					line-height: 16rem;
					margin-bottom: 8rem;
				}
				&__bottom {
					display: flex;
					align-items: center;
					justify-content: space-between;
					&__price {
						display: flex;
						align-items: center;
						&__promotion {
							font-family: PingFangSC-Semibold;
							font-size: 14rem;
							color: #e93b3b;
							line-height: 20rem;
							margin-right: 8rem;
							&::first-letter {
								font-size: 12rem;
							}
						}
						&__original {
							font-family: PingFangSC-Regular;
							font-size: 10rem;
							color: #999999;
							line-height: 20rem;
							&::first-letter {
								font-size: 12rem;
							}
						}
					}
					&__count {
						display: flex;
						align-items: center;
						&__minus-iconfont {
							color: #666666;
							font-size: 20rem;
						}
						&__number {
							font-family: PingFangSC-Regular;
							font-size: 14rem;
							color: #333333;
							margin-left: 10rem;
							margin-right: 10rem;
						}
						&__plus-iconfont {
							font-size: 17rem;
							color: #0091ff;
						}
					}
				}
			}
		}
	}
	&__count {
		box-shadow: 0 -1px 1px 0 #f1f1f1;
		position: fixed;
		left: 0;
		right: 0;
		bottom: 0;
		height: 49rem;
		// background-color: olivedrab;
		display: flex;
		justify-content: space-between;
		&__left {
			display: flex;
			align-items: center;
			&__icon {
				position: relative;
				margin-left: 24px;
				margin-right: 32px;
				&__image {
					width: 28px;
					height: 26px;
				}
				&__number {
					display: block;
					min-width: 20px;
					height: 20px;
					background: #e93b3b;
					border-radius: 10px;
					font-family: PingFangSC-Medium;
					font-size: 16px;
					transform: scale(0.5, 0.5);
					transform-origin: left top;
					color: #ffffff;
					text-align: center;
					position: absolute;
					left: 24px;
					top: -4px;
				}
			}
			&__count {
				display: flex;
				align-items: center;
				font-family: PingFangSC-Regular;
				font-size: 12px;
				color: #333333;
				&__price {
					font-family: PingFangSC-Medium;
					font-size: 18px;
					color: #e93b3b;
				}
			}
		}
		&__right {
			width: 98px;
			height: 49px;
			background-color: #4fb0f9;
			font-family: PingFangSC-Medium;
			font-size: 14px;
			color: #ffffff;
			text-align: center;
			line-height: 49px;
		}
	}
}
</style>
```

> 这个时候, 我们还不能看到效果, 因为`rightItems`还没有定义

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281436612.png#crop=0&crop=0&crop=1&crop=1&id=Aoms8&originHeight=365&originWidth=820&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=JZU1r&originHeight=365&originWidth=820&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 注意, 记得复制`@import '../../style/mixins.scss';`
>
> 违法防止报错, 可以先定义一个空数组

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281443491.png#crop=0&crop=0&crop=1&crop=1&id=otWvx&originHeight=1290&originWidth=1657&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=w96xu&originHeight=1290&originWidth=1657&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> `rightItems`不够见名知意, 建议改成`cartItems`, 并且做成计算属性

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281450794.png#crop=0&crop=0&crop=1&crop=1&id=gpLQZ&originHeight=963&originWidth=1704&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kIiOI&originHeight=963&originWidth=1704&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 所以我们应该有两个标签, 一个是`cart__detail`, 用来放购物车详情, 一个是`cart__count`, 存放之前的代码
>
> 文件地址:`src\views\shop\Cart.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041942572.png#crop=0&crop=0&crop=1&crop=1&id=ox7I2&originHeight=598&originWidth=804&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=YaelE&originHeight=598&originWidth=804&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 注意 scss 也要做相应的调整, 完整版 css 代码, 参见上面

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041944773.png#crop=0&crop=0&crop=1&crop=1&id=gsreJ&originHeight=598&originWidth=815&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Dw9Pa&originHeight=598&originWidth=815&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 点击之后, 发现并不能正常展示, 因为被内容区盖住了, 需要设置`cart__detail`的 css

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281523054.png#crop=0&crop=0&crop=1&crop=1&id=xjvnV&originHeight=1001&originWidth=563&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=OphxD&originHeight=1001&originWidth=563&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 样式方面还是有些差异, 我们先稍作调整, 后期再完善

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281542156.png#crop=0&crop=0&crop=1&crop=1&id=sSY0N&originHeight=1093&originWidth=1418&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kiWVP&originHeight=1093&originWidth=1418&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281551938.png#crop=0&crop=0&crop=1&crop=1&id=PiI1d&originHeight=749&originWidth=2144&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Cb3HJ&originHeight=749&originWidth=2144&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281546023.png#crop=0&crop=0&crop=1&crop=1&id=NKRP4&originHeight=1086&originWidth=2138&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ROW3b&originHeight=1086&originWidth=2138&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 代码整理

> 我们把`src\views\shop\Cart.vue`的代码抽离一下

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281602209.png#crop=0&crop=0&crop=1&crop=1&id=ZsSQC&originHeight=1365&originWidth=1768&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=NWUGa&originHeight=1365&originWidth=1768&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 内容区, 购物车列表, 双向数据同步

> 现在内容区的数据可以同步到购物车列表, 但是购物车列表的数据无法同步到内容区, 因为按钮的点击事件`changeItemToCart`没有定义
>
> 因为内容区和购物车都用到了这一部分的逻辑, 我们把这一部分的逻辑可以封装成 js 文件

```javascript
// src\views\shop\commonCartEffect.js
import { useStore } from "vuex";
import { toRefs } from "vue";
// 购物车相关逻辑
export const useCommonCartEffect = () => {
	const store = useStore();
	const { cartData } = toRefs(store.state);
	const changeItemToCart = (shopId, itemId, itemInfo, num) => {
		store.commit("changeItemToCart", { shopId, itemId, itemInfo, num });
	};
	return { cartData, changeItemToCart };
};
```

> 修改`src\views\shop\Content.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281614107.png#crop=0&crop=0&crop=1&crop=1&id=gpiN4&originHeight=611&originWidth=1637&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jjV0b&originHeight=611&originWidth=1637&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281614737.png#crop=0&crop=0&crop=1&crop=1&id=dZmwm&originHeight=1008&originWidth=1494&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=J9qcq&originHeight=1008&originWidth=1494&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 修改`src\views\shop\Cart.vue`, 注意导出`shopId`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281616601.png#crop=0&crop=0&crop=1&crop=1&id=RhYQs&originHeight=803&originWidth=1699&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=It4qS&originHeight=803&originWidth=1699&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281617513.png#crop=0&crop=0&crop=1&crop=1&id=XWlGW&originHeight=389&originWidth=1385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=FUtt2&originHeight=389&originWidth=1385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281619271.gif#crop=0&crop=0&crop=1&crop=1&id=KwEuW&originHeight=1001&originWidth=560&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=CUdHX&originHeight=1001&originWidth=560&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 完善购物车详情样式(HTML)

> 我们之前复制修改了一些代码, 但是和效果图上还是有些差距

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281702678.png#crop=0&crop=0&crop=1&crop=1&id=gMW4k&originHeight=752&originWidth=1201&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=QV6uT&originHeight=752&originWidth=1201&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们来完善一下结构和样式, 先写 html

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281715183.png#crop=0&crop=0&crop=1&crop=1&id=tAf6q&originHeight=513&originWidth=1019&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=wGuW2&originHeight=513&originWidth=1019&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281736240.png#crop=0&crop=0&crop=1&crop=1&id=k7T0s&originHeight=878&originWidth=1569&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=JHU0d&originHeight=878&originWidth=1569&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281730985.png#crop=0&crop=0&crop=1&crop=1&id=cuMOk&originHeight=625&originWidth=1828&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Y1ODb&originHeight=625&originWidth=1828&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<template>
	<div class="cart">
		<!-- 头部, 全选 -->
		<div class="cart__header">
			<div class="cart__header__left">
				<div v-if="true" class="cart__header__left__checked-iconfont">&#xe618;</div>
				<div v-else class="cart__header__left__unchecked-iconfont">&#xe619;</div>
				<div class="cart__header__left__text">全选</div>
			</div>
			<div class="cart__header__right">
				<div class="cart__header__right__clear-cart">清空购物车</div>
			</div>
		</div>
		<!-- 详情信息 -->
		<div class="cart__detail">
			<div v-for="item of cartItems" :key="item.id" class="cart__detail__item">
				<div class="cart__detail__item__left">
					<!-- 选中/不选中 字体图标 -->
					<div v-if="item.checked" class="cart__detail__item__left__checked-iconfont">&#xe618;</div>
					<div v-else class="cart__detail__item__left__unchecked-iconfont">&#xe619;</div>
					<!-- 商品的图片 -->
					<img :src="item.imgUrl" alt="" class="cart__detail__item__left__image" />
					<!-- 商品信息 -->
					<div class="cart__detail__item__left__cart-info">
						<!-- 商品标题 -->
						<div class="cart__detail__item__left__cart-info__title">{{ item.name }}</div>
						<!-- 商品价格 -->
						<div class="cart__detail__item__left__cart-info__price">
							<div class="cart__detail__item__left__cart-info__price__promotion">¥{{ item.promotionPrice }}</div>
							<div class="cart__detail__item__left__cart-info__price__original">¥{{ item.originalPrice }}</div>
						</div>
					</div>
				</div>
				<div class="cart__detail__item__right">
					<span
						@click="
              () => {
                changeItemToCart(shopId, item.id, item, -1)
              }
            "
						v-show="cartData?.[shopId]?.[item.id]?.['count']"
						class="cart__detail__item__right__minus-iconfont"
					>
						&#xe66d;
					</span>
					<span v-show="cartData?.[shopId]?.[item.id]?.['count']" class="cart__detail__item__right__number">
						{{ cartData?.[shopId]?.[item.id]?.['count'] }}
					</span>
					<span
						@click="
              () => {
                changeItemToCart(shopId, item.id, item, 1)
              }
            "
						class="cart__detail__item__right__plus-iconfont"
					>
						&#xe605;
					</span>
				</div>
			</div>
		</div>
		<!-- 购物车总计 -->
		<div class="cart__count">
			<div class="cart__count__left">
				<div class="cart__count__left__icon">
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261637089.png"
						alt=""
						class="cart__count__left__icon__image"
					/>
					<span class="cart__count__left__icon__number">{{ total }}</span>
				</div>
				<div class="cart__count__left__count">
					总计:
					<span class="cart__count__left__count__price">¥ {{ sumPrice }}</span>
				</div>
			</div>
			<div class="cart__count__right">去结算</div>
		</div>
	</div>
</template>
```

> 需要两个字体图标, 来表示选中状态, 可以去阿里图标库下载, 搜索 checked 即可, 修改对应的 css 代码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281734669.png#crop=0&crop=0&crop=1&crop=1&id=y4AHZ&originHeight=835&originWidth=1529&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=gA0hJ&originHeight=835&originWidth=1529&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281736446.png#crop=0&crop=0&crop=1&crop=1&id=JMUdO&originHeight=278&originWidth=1313&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=TJYm5&originHeight=278&originWidth=1313&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 粘贴字体图标的 unicode 编码

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281737049.png#crop=0&crop=0&crop=1&crop=1&id=cWzea&originHeight=106&originWidth=889&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=NeIkj&originHeight=106&originWidth=889&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 能看出来效果, 但是需要美化

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281741664.png#crop=0&crop=0&crop=1&crop=1&id=p3cVK&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ahGtg&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 之前漏掉了全选前面的字体图标, 现在补上

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202281909690.png#crop=0&crop=0&crop=1&crop=1&id=DBErN&originHeight=524&originWidth=1133&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Cz93M&originHeight=524&originWidth=1133&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> html 的结构已经被咱们修改了, 所以 css 也要变, 感觉根据效果图重写一遍反而会快一点...

# 完善购物车详情样式(CSS)

> 因为文件比较大, html 代码在最上面, css 代码在最下面, 需要来回滚动, 所以建议编辑器分屏, 左边写 css, 右边查看 html

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011533965.png#crop=0&crop=0&crop=1&crop=1&id=Oo4GJ&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=BmJR1&originHeight=1080&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 分屏按钮如下图

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011533060.png#crop=0&crop=0&crop=1&crop=1&id=ERJ6y&originHeight=180&originWidth=537&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=cuUAY&originHeight=180&originWidth=537&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 代码过长, 不截图了, 直接放在下面代码段里了

```
// src\views\shop\Cart.vue
@import "../../style/mixins.scss";
.cart {
	position: fixed;
	background-color: #fff;
	width: 375px;
	left: 0;
	bottom: 0;
	&__header {
		box-sizing: border-box;
		padding: 0 18px;
		width: 100%;
		height: 52px;
		display: flex;
		justify-content: space-between;
		align-items: center;
		border-bottom: 1px solid #f1f1f1;
		&__left {
			display: flex;
			align-items: center;
			&__checked-iconfont {
				font-size: 19px;
				margin-right: 9px;
				color: #0091ff;
			}
			&__unchecked-iconfont {
				font-size: 19px;
				margin-right: 9px;
				color: #0091ff;
			}
			&__text {
				font-family: PingFangSC-Regular;
				font-size: 14px;
				color: #333333;
				line-height: 16px;
			}
		}
		&__right {
			&__clear-cart {
				font-family: PingFangSC-Regular;
				font-size: 14px;
				color: #333333;
				text-align: right;
				line-height: 16px;
			}
		}
	}
	&__detail {
		box-sizing: border-box;
		width: 100%;
		padding: 0 18px;
		&__item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 16px;
			margin-top: 16px;
			&__left {
				display: flex;
				align-items: center;
				&__checked-iconfont {
					font-size: 19px;
					margin-right: 9px;
					color: #0091ff;
				}
				&__unchecked-iconfont {
					font-size: 19px;
					margin-right: 9px;
					color: #0091ff;
				}
				&__image {
					width: 46px;
					height: 46px;
					margin-left: 16.4px;
					margin-right: 16px;
				}
				&__cart-info {
					&__title {
						font-family: PingFangSC-Medium;
						font-size: 14px;
						color: #333333;
						margin-bottom: 6px;
					}
					&__price {
						display: flex;
						align-items: center;
						&__promotion {
							font-family: PingFangSC-Semibold;
							font-size: 14rem;
							color: #e93b3b;
							line-height: 20rem;
							margin-right: 8rem;
							&::first-letter {
								font-size: 10rem;
							}
						}
						&__original {
							font-family: PingFangSC-Regular;
							font-size: 10rem;
							color: #999999;
							line-height: 20rem;
							text-decoration: line-through;
						}
					}
				}
			}
			&__right {
				display: flex;
				align-items: center;
				&__minus-iconfont {
					color: #666666;
					font-size: 20rem;
				}
				&__number {
					font-family: PingFangSC-Regular;
					font-size: 14rem;
					color: #333333;
					margin-left: 10rem;
					margin-right: 10rem;
				}
				&__plus-iconfont {
					font-size: 17rem;
					color: #0091ff;
				}
			}
		}
	}
	&__count {
		box-shadow: 0 -1px 1px 0 #f1f1f1;
		left: 0;
		right: 0;
		bottom: 0;
		height: 49rem;
		// background-color: olivedrab;
		display: flex;
		justify-content: space-between;
		&__left {
			display: flex;
			align-items: center;
			&__icon {
				position: relative;
				margin-left: 24px;
				margin-right: 32px;
				&__image {
					width: 28px;
					height: 26px;
				}
				&__number {
					display: block;
					min-width: 20px;
					height: 20px;
					background: #e93b3b;
					border-radius: 10px;
					font-family: PingFangSC-Medium;
					font-size: 16px;
					transform: scale(0.5, 0.5);
					transform-origin: left top;
					color: #ffffff;
					text-align: center;
					position: absolute;
					left: 24px;
					top: -4px;
				}
			}
			&__count {
				display: flex;
				align-items: center;
				font-family: PingFangSC-Regular;
				font-size: 12px;
				color: #333333;
				&__price {
					font-family: PingFangSC-Medium;
					font-size: 18px;
					color: #e93b3b;
				}
			}
		}
		&__right {
			width: 98px;
			height: 49px;
			background-color: #4fb0f9;
			font-family: PingFangSC-Medium;
			font-size: 14px;
			color: #ffffff;
			text-align: center;
			line-height: 49px;
		}
	}
}
```

> 最终的效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011550411.png#crop=0&crop=0&crop=1&crop=1&id=xQ8cV&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=WZC2s&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 购物车选中状态

> 我们需要添加字段来标记选中状态, 同时我们的逻辑是, 新增的商品, 或者是数量发生变化的商品, 都应该切换为选中状态

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011644586.png#crop=0&crop=0&crop=1&crop=1&id=uNePM&originHeight=473&originWidth=917&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ehdNi&originHeight=473&originWidth=917&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011646319.png#crop=0&crop=0&crop=1&crop=1&id=U2nNH&originHeight=514&originWidth=1225&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=QCrZd&originHeight=514&originWidth=1225&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 计算总价的逻辑也要更改, 只有选中的商品才计算在内

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011655573.png#crop=0&crop=0&crop=1&crop=1&id=qC57b&originHeight=609&originWidth=1106&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Fmdr4&originHeight=609&originWidth=1106&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 点击切换选中状态, 需要绑定函数

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011659820.png#crop=0&crop=0&crop=1&crop=1&id=MSKfq&originHeight=486&originWidth=1406&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=RfpZl&originHeight=486&originWidth=1406&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 需要导出

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011722805.png#crop=0&crop=0&crop=1&crop=1&id=Ed8p9&originHeight=400&originWidth=977&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=IhsFs&originHeight=400&originWidth=977&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 在`useCommonCartEffect`中定义

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011722726.png#crop=0&crop=0&crop=1&crop=1&id=Qtrj9&originHeight=589&originWidth=917&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=J6GLb&originHeight=589&originWidth=917&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 定义 mutations

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011723633.png#crop=0&crop=0&crop=1&crop=1&id=mWlPA&originHeight=725&originWidth=697&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ajsPx&originHeight=725&originWidth=697&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最终的效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011726687.gif#crop=0&crop=0&crop=1&crop=1&id=nPSP9&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=oWVUi&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 清空购物车

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011745532.png#crop=0&crop=0&crop=1&crop=1&id=N5bSV&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=fdS25&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 添加点击事件`clearCart`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011746064.png#crop=0&crop=0&crop=1&crop=1&id=lNfxD&originHeight=394&originWidth=1117&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=miIFt&originHeight=394&originWidth=1117&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 导出方法

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011747561.png#crop=0&crop=0&crop=1&crop=1&id=dPTyp&originHeight=396&originWidth=1149&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=UfCyg&originHeight=396&originWidth=1149&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 在`useCommonCartEffect`中定义

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011748271.png#crop=0&crop=0&crop=1&crop=1&id=TNFyW&originHeight=249&originWidth=813&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=cS4vL&originHeight=249&originWidth=813&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 修改 mutations

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011757022.png#crop=0&crop=0&crop=1&crop=1&id=XoVda&originHeight=443&originWidth=589&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=amkbR&originHeight=443&originWidth=589&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011800644.gif#crop=0&crop=0&crop=1&crop=1&id=Y45kV&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=YV0Ik&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 购物车全选

> 首先全选按钮可以监控商品的勾选状态, 如果全部勾选, 则全选, 如果有商品没有勾选, 则不全选
>
> 我们可以定义一个计算属性`allChecked`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011853830.png#crop=0&crop=0&crop=1&crop=1&id=kHZ1O&originHeight=373&originWidth=947&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kTSHV&originHeight=373&originWidth=947&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011854661.png#crop=0&crop=0&crop=1&crop=1&id=iP4z8&originHeight=680&originWidth=588&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jJLLz&originHeight=680&originWidth=588&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011854192.png#crop=0&crop=0&crop=1&crop=1&id=uWSb8&originHeight=323&originWidth=753&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ktkdd&originHeight=323&originWidth=753&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203011855595.png#crop=0&crop=0&crop=1&crop=1&id=fttDX&originHeight=677&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=uy4HN&originHeight=677&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 现在可以做到监控单个商品的勾选了
>
> 除此之外, 点击全选按钮, 应该让所有的商品处于一个勾选的状态, 可以定义一个函数`setAllChecked`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020918144.png#crop=0&crop=0&crop=1&crop=1&id=r4wpI&originHeight=803&originWidth=918&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=D9sJ9&originHeight=803&originWidth=918&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 定义函数`setAllChecked`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020918746.png#crop=0&crop=0&crop=1&crop=1&id=YJJgf&originHeight=1080&originWidth=1153&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=DgRQI&originHeight=1080&originWidth=1153&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 定义`mutations`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020919459.png#crop=0&crop=0&crop=1&crop=1&id=RsX43&originHeight=675&originWidth=890&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=tBIkE&originHeight=675&originWidth=890&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 导出使用

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020920083.png#crop=0&crop=0&crop=1&crop=1&id=LKJpb&originHeight=327&originWidth=1754&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=AOfuz&originHeight=327&originWidth=1754&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020916626.png#crop=0&crop=0&crop=1&crop=1&id=FGIi7&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ubrsF&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 控制购物车显示隐藏

> 默认购物车隐藏, 只有点击购物车图标并且有商品的时候展示, 我们可以定义一个变量`cartShow`来表示状态, 定义一个方法`handleCartShowChange`来修改状态

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020938929.png#crop=0&crop=0&crop=1&crop=1&id=dCvkv&originHeight=438&originWidth=997&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=xYcOJ&originHeight=438&originWidth=997&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020939356.png#crop=0&crop=0&crop=1&crop=1&id=lnocT&originHeight=959&originWidth=1349&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=TEAxE&originHeight=959&originWidth=1349&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 记得引入 ref

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020939796.png#crop=0&crop=0&crop=1&crop=1&id=oeGGQ&originHeight=253&originWidth=1103&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Ps5N3&originHeight=253&originWidth=1103&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 在页面中使用

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020940151.png#crop=0&crop=0&crop=1&crop=1&id=ukNrE&originHeight=723&originWidth=1313&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=WSDrU&originHeight=723&originWidth=1313&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

# 解决一个 bug

> 发现购物车里不显示数量了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020957160.png#crop=0&crop=0&crop=1&crop=1&id=l2Jam&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=iyAGh&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 原因是`cartData`的导出不小心删掉了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020959921.png#crop=0&crop=0&crop=1&crop=1&id=xIVQm&originHeight=929&originWidth=1074&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=rkMpl&originHeight=929&originWidth=1074&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 现在就可以了

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203020958688.png#crop=0&crop=0&crop=1&crop=1&id=Q9hN7&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Jb6SN&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 完善购物车的显示和隐藏

> 如果所有商品清空, 购物车也应该是隐藏的, 或者说如果没有商品, 即便是点击了按钮, 购物车也不应该弹出来, 所以购物车显示还需要满足一个条件: 购物车有数据
>
> 所以我们需要判断`cartItems`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021523405.png#crop=0&crop=0&crop=1&crop=1&id=l1uLA&originHeight=271&originWidth=1204&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=cpBqd&originHeight=271&originWidth=1204&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021543129.png#crop=0&crop=0&crop=1&crop=1&id=LGYJD&originHeight=199&originWidth=873&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=oDpCB&originHeight=199&originWidth=873&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 之前的计算属性需要改一下

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021557252.png#crop=0&crop=0&crop=1&crop=1&id=aUC20&originHeight=328&originWidth=852&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=JKZfM&originHeight=328&originWidth=852&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题, 但是还有一个 bug, 如果之前点开了购物车, 清除商品后, 购物车隐藏, 再加商品, 购物车会自动弹出来, 因为`cartShow`还是`true`, 之前购物车清空后, `cartShow`应该改成`false`, 另外, 如果购物车为空, 是不应该改变`cartShow`的状态的

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021628683.png#crop=0&crop=0&crop=1&crop=1&id=jipRa&originHeight=362&originWidth=1009&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=BZa7n&originHeight=362&originWidth=1009&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021629631.png#crop=0&crop=0&crop=1&crop=1&id=MqKYb&originHeight=409&originWidth=1054&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=j7Sxr&originHeight=409&originWidth=1054&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021629308.png#crop=0&crop=0&crop=1&crop=1&id=ZJUEH&originHeight=884&originWidth=913&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=XGOIh&originHeight=884&originWidth=913&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

# 购物车蒙层

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021633553.png#crop=0&crop=0&crop=1&crop=1&id=kqqf5&originHeight=688&originWidth=399&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=sRthz&originHeight=688&originWidth=399&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们需要做一个蒙层, 在购物车展开的时候展示, 购物车折叠的时候隐藏

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021636048.png#crop=0&crop=0&crop=1&crop=1&id=i0b5A&originHeight=232&originWidth=458&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=dEv2d&originHeight=232&originWidth=458&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021637736.png#crop=0&crop=0&crop=1&crop=1&id=Fo1IK&originHeight=473&originWidth=767&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jYLpe&originHeight=473&originWidth=767&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021637637.png#crop=0&crop=0&crop=1&crop=1&id=VOgpI&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=q4H6C&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 添加显示的逻辑

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021640234.png#crop=0&crop=0&crop=1&crop=1&id=lGjyc&originHeight=240&originWidth=992&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=pKJJA&originHeight=240&originWidth=992&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021638640.png#crop=0&crop=0&crop=1&crop=1&id=ibLI1&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=xlQ45&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 点击蒙层, 可以折叠购物车和关闭蒙层, 功能和点击左下角的购物车图标是一个效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021644306.png#crop=0&crop=0&crop=1&crop=1&id=yEtRZ&originHeight=387&originWidth=746&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=UwOJW&originHeight=387&originWidth=746&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021646035.gif#crop=0&crop=0&crop=1&crop=1&id=QE77S&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=aEnt9&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 购物车数据结构变更

> 经过查看设计稿我们发现, 订单页面里面, 是包含商铺名称的

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021740965.png#crop=0&crop=0&crop=1&crop=1&id=EIDAT&originHeight=677&originWidth=385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=tDJTf&originHeight=677&originWidth=385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 而我们在 vuex 里面存的购物车信息, 是不包含商铺名称的, 所以我们需要修改一下购物车的数据的结构

> 修改前

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021748176.png#crop=0&crop=0&crop=1&crop=1&id=y0mFv&originHeight=967&originWidth=1412&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Y3sXQ&originHeight=967&originWidth=1412&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 修改后

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202204092106228.png#crop=0&crop=0&crop=1&crop=1&id=RrC2x&originHeight=1084&originWidth=1435&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=GWZU0&originHeight=1084&originWidth=1435&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 数据结构变更之后, 原来的代码也要相应的改变, 改动的地方较多, 截图如下

> 首先是`src\store\index.js`的改动

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031644574.png#crop=0&crop=0&crop=1&crop=1&id=AjWEb&originHeight=673&originWidth=1847&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=P3tAL&originHeight=673&originWidth=1847&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031645495.png#crop=0&crop=0&crop=1&crop=1&id=SCoLj&originHeight=826&originWidth=1839&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ISp71&originHeight=826&originWidth=1839&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031645175.png#crop=0&crop=0&crop=1&crop=1&id=IaKff&originHeight=583&originWidth=1773&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=tZ8Nw&originHeight=583&originWidth=1773&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 然后是`src\views\shop\commonCartEffect.js`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031647760.png#crop=0&crop=0&crop=1&crop=1&id=rA9pq&originHeight=345&originWidth=1850&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Q7EAT&originHeight=345&originWidth=1850&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 然后是`src\views\shop\Shop.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031648076.png#crop=0&crop=0&crop=1&crop=1&id=aQgld&originHeight=614&originWidth=1849&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=DRUeZ&originHeight=614&originWidth=1849&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 然后是`src\views\shop\Content.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031650583.png#crop=0&crop=0&crop=1&crop=1&id=M651Z&originHeight=835&originWidth=1850&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nT2Wf&originHeight=835&originWidth=1850&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031650768.png#crop=0&crop=0&crop=1&crop=1&id=QLoGX&originHeight=484&originWidth=1844&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=D0Wl1&originHeight=484&originWidth=1844&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最后是`src\views\shop\Cart.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031651161.png#crop=0&crop=0&crop=1&crop=1&id=GqdD4&originHeight=835&originWidth=1811&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zs6Mq&originHeight=835&originWidth=1811&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031652473.png#crop=0&crop=0&crop=1&crop=1&id=Mrl1x&originHeight=802&originWidth=1760&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=wInkU&originHeight=802&originWidth=1760&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031653632.png#crop=0&crop=0&crop=1&crop=1&id=tQH4Z&originHeight=671&originWidth=1787&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=hUxNH&originHeight=671&originWidth=1787&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031653959.png#crop=0&crop=0&crop=1&crop=1&id=Ew7Br&originHeight=646&originWidth=1856&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=lDBzU&originHeight=646&originWidth=1856&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题, 之前的功能依然可以正常使用

# 购物车信息持久存储

> 刷新页面, 数据会丢失, 因为 vue 刷新后会重新创建 vue 实例, 因此 store 会被重新赋值, 所以我们需要把购物车的信息放到 localStorage 里面

```javascript
// src\store\index.js

import { createStore } from "vuex";

// 把购物车放入缓存
const setLocalCartData = (state) => {
	// 把购物相关数据解构出来/获取购物车数据
	const { cartData } = state;
	// 对象转json字符串
	const cartDataString = JSON.stringify(cartData);
	// 保存到localStorage
	localStorage.cartData = cartDataString;
};

// 从缓存中获取购物车数据
const getLocalCartData = () => {
	let result = {};
	// 判断localStorage里面是否有数据
	if (localStorage.cartData) {
		result = JSON.parse(localStorage.cartData);
	}
	// 返回数据
	return result;
};
// ...
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202204092130372.png#crop=0&crop=0&crop=1&crop=1&id=GyOsy&originHeight=291&originWidth=561&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=sbjUS&originHeight=291&originWidth=561&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 每个 mutation 最后, 都应该把最新的购物车数据, 存到 localStorage 里面

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203031734249.png#crop=0&crop=0&crop=1&crop=1&id=Hmp21&originHeight=886&originWidth=1081&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=D6lHo&originHeight=886&originWidth=1081&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题, 刷新之后, 数据还在

# 确认订单页面跳转

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203032344953.png#crop=0&crop=0&crop=1&crop=1&id=nObFu&originHeight=684&originWidth=397&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kEZcZ&originHeight=684&originWidth=397&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 跳转逻辑

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203032346659.png#crop=0&crop=0&crop=1&crop=1&id=hnizy&originHeight=1403&originWidth=2161&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=DQKYv&originHeight=1403&originWidth=2161&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 所以我们需要 shopId, 来确定商铺里面的购物信息, 也就是带参数跳转
>
> 首先创建相关页面`src\views\order\OrderConfirmation.vue`

```vue
<template>this is OrderConfirmation</template>
<script>
export default {
	name: "OrderConfirmation",
};
</script>
<style lang="scss" scoped></style>
```

> 设置路由`src\router\index.js`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203032351381.png#crop=0&crop=0&crop=1&crop=1&id=nwMyy&originHeight=251&originWidth=855&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=tZDzY&originHeight=251&originWidth=855&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编辑跳转功能

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203040000032.png#crop=0&crop=0&crop=1&crop=1&id=bDmgH&originHeight=245&originWidth=931&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=WdMWA&originHeight=245&originWidth=931&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 去结算的样式需要调整

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021735488.png#crop=0&crop=0&crop=1&crop=1&id=VBLeO&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=lIJu5&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203021738466.png#crop=0&crop=0&crop=1&crop=1&id=CWtbY&originHeight=723&originWidth=865&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kytqL&originHeight=723&originWidth=865&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 测试跳转效果, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203040001652.png#crop=0&crop=0&crop=1&crop=1&id=O6Vfu&originHeight=459&originWidth=1085&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=JHhKQ&originHeight=459&originWidth=1085&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 确认订单页面头部(HTML)

> 开始编写对应的 html, 需要字体图标, 搜索`right`即可

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203040146759.png#crop=0&crop=0&crop=1&crop=1&id=RItEk&originHeight=558&originWidth=986&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jsMGV&originHeight=558&originWidth=986&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203040152049.png#crop=0&crop=0&crop=1&crop=1&id=d2Pzo&originHeight=906&originWidth=1180&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=IbAvp&originHeight=906&originWidth=1180&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<template>
	<div class="container">
		<div class="container__top">
			<div class="container__top__header">
				<div class="container__top__header__back">&#xe679;</div>
				<div class="container__top__header__text">确认订单</div>
			</div>
			<div class="container__top__receiver">
				<div class="container__top__receiver__left">
					<div class="container__top__receiver__left__title">收货地址</div>
					<div class="container__top__receiver__left__address">北京理工大学国防科技园2号楼10层</div>
					<div class="container__top__receiver__left__info">
						<div class="container__top__receiver__left__info__name">瑶妹（先生）</div>
						<div class="container__top__receiver__left__info__phone">18911024266</div>
					</div>
				</div>
				<div class="container__top__receiver__right">
					<div class="container__top__receiver__right__icon">&#xe694;</div>
				</div>
			</div>
		</div>
	</div>
</template>
```

> 最终的结果, 可以看到, 内容和字体图标是可以展示的

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203040152158.png#crop=0&crop=0&crop=1&crop=1&id=Ee2lh&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=FFsI7&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 确认订单页面头部(CSS)

```vue
<style lang="scss" scoped>
.container {
	position: fixed;
	left: 0;
	right: 0;
	top: 0;
	bottom: 49px;
	background-color: #f8f8f8;
	&__top {
		&__header {
			height: 139px;
			background-image: linear-gradient(0deg, rgba(0, 145, 255, 0) 4%, #0091ff 50%);
			background-repeat: no-repeat;
			&__back {
				font-size: 24px;
				color: #fff;
				position: absolute;
				left: 18.5px;
				top: 18px;
			}
			&__text {
				text-align: center;
				padding-top: 21px;
				font-family: PingFangSC-Regular;
				font-size: 16px;
				color: #ffffff;
			}
		}
		&__receiver {
			width: 339px;
			height: 111px;
			background-color: #fff;
			border-radius: 4px;
			margin: 0 auto;
			position: relative;
			top: -74px;
			padding: 16px;
			display: flex;
			justify-content: space-between;
			box-sizing: border-box;
			&__left {
				&__title {
					font-family: PingFangSC-Medium;
					font-size: 16px;
					color: #333333;
					margin-bottom: 16px;
				}
				&__address {
					font-family: PingFangSC-Regular;
					font-size: 14px;
					color: #333333;
					margin-bottom: 8px;
				}
				&__info {
					font-family: PingFangSC-Regular;
					font-size: 12px;
					color: #666666;
					display: flex;
					&__name {
						margin-right: 6px;
					}
				}
			}
			&__right {
				display: flex;
				align-items: center;
				font-size: 17px;
				color: #666;
			}
		}
	}
}
</style>
```

> 最终的效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203040232562.png#crop=0&crop=0&crop=1&crop=1&id=KRgl8&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Gx4N0&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 订单商品列表(HTML)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041424339.png#crop=0&crop=0&crop=1&crop=1&id=H3GVD&originHeight=698&originWidth=435&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=beGzj&originHeight=698&originWidth=435&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 先编写 html, 对应的图片地址

```
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png
https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527853.png
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041445059.png#crop=0&crop=0&crop=1&crop=1&id=ngDFM&originHeight=325&originWidth=583&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=FQHE3&originHeight=325&originWidth=583&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<div class="container__order">
	<div class="container__order__shop-name">沃尔玛</div>
	<div class="container__order__info">
		<div class="container__order__info__item">
			<div class="container__order__info__item__left">
				<img
					src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png"
					alt=""
					class="container__order__info__item__left__image"
				/>
			</div>
			<div class="container__order__info__item__right">
				<div class="container__order__info__item__right__name">番茄250g/份</div>
				<div class="container__order__info__item__right__price">
					<div class="container__order__info__item__right__price__left">¥33.6 x 3</div>
					<div class="container__order__info__item__right__price__right">¥99.9</div>
				</div>
			</div>
		</div>
		<div class="container__order__info__item">
			<div class="container__order__info__item__left">
				<img
					src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png"
					alt=""
					class="container__order__info__item__left__image"
				/>
			</div>
			<div class="container__order__info__item__right">
				<div class="container__order__info__item__right__name">番茄250g/份</div>
				<div class="container__order__info__item__right__price">
					<div class="container__order__info__item__right__price__left">¥33.6 x 3</div>
					<div class="container__order__info__item__right__price__right">¥99.9</div>
				</div>
			</div>
		</div>
		<div class="container__order__info__item">
			<div class="container__order__info__item__left">
				<img
					src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png"
					alt=""
					class="container__order__info__item__left__image"
				/>
			</div>
			<div class="container__order__info__item__right">
				<div class="container__order__info__item__right__name">番茄250g/份</div>
				<div class="container__order__info__item__right__price">
					<div class="container__order__info__item__right__price__left">¥33.6 x 3</div>
					<div class="container__order__info__item__right__price__right">¥99.9</div>
				</div>
			</div>
		</div>
	</div>
</div>
```

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041446559.png#crop=0&crop=0&crop=1&crop=1&id=EhSF9&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=fAExc&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 订单商品列表(CSS)

> 接下来编写样式

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041522639.png#crop=0&crop=0&crop=1&crop=1&id=OCW87&originHeight=563&originWidth=492&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=oAyLG&originHeight=563&originWidth=492&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
&__order {
	border-radius: 4px;
	width: 339px;
	background-color: #fff;
	margin: 0 auto;
	position: relative;
	top: -58px;
	padding: 16px;
	padding-bottom: 6px;
	box-sizing: border-box;
	&__shop-name {
		font-family: PingFangSC-Medium;
		font-size: 16px;
		color: #333333;
		margin-bottom: 16px;
	}
	&__info {
		&__item {
			display: flex;
			margin-bottom: 6px;
			&__left {
				&__image {
					width: 46px;
					height: 46px;
					margin-right: 16px;
				}
			}
			&__right {
				flex-grow: 1;
				&__name {
					margin-top: 2px;
					font-family: PingFangSC-Medium;
					font-size: 14px;
					color: #333333;
					margin-bottom: 8px;
				}
				&__price {
					display: flex;
					justify-content: space-between;
					&__left {
						font-family: PingFangSC-Regular;
						font-size: 28px;
						color: #e93b3b;
						transform: scale(50%, 50%);
						transform-origin: left top;
						&::first-letter {
							font-size: 20px;
						}
					}
					&__right {
						font-family: PingFangSC-Regular;
						font-size: 28px;
						color: #000000;
						text-align: right;
						transform: scale(50%, 50%);
						transform-origin: right top;
						&::first-letter {
							font-size: 20px;
						}
					}
				}
			}
		}
	}
}
```

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041522673.png#crop=0&crop=0&crop=1&crop=1&id=S2zyL&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=VNSwK&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 订单商品列表替换数据

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041600083.png#crop=0&crop=0&crop=1&crop=1&id=lfqkp&originHeight=662&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=x7LlU&originHeight=662&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 从设计稿上我们可以看出, 我们需要的数据包括商铺名称, 以及商铺下的购物车列表
>
> 我们先把之前的`src\views\shop\commonCartEffect.js`换一下位置, 放到公共组件中去, 地址为`src\effects\commonCartEffect.js`, 因为移动了位置, 之前的路径相关的代码, 也要修改

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041847695.png#crop=0&crop=0&crop=1&crop=1&id=Bpi5b&originHeight=289&originWidth=978&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kB4AK&originHeight=289&originWidth=978&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041848797.png#crop=0&crop=0&crop=1&crop=1&id=VOX9e&originHeight=315&originWidth=1102&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=KbjLh&originHeight=315&originWidth=1102&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 然后通过 shopId 获取相关信息, 计算并展示到页面

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041702023.png#crop=0&crop=0&crop=1&crop=1&id=UHMbL&originHeight=832&originWidth=941&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=T9ZhP&originHeight=832&originWidth=941&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041703310.png#crop=0&crop=0&crop=1&crop=1&id=XUECs&originHeight=766&originWidth=1107&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ChOdH&originHeight=766&originWidth=1107&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041703549.png#crop=0&crop=0&crop=1&crop=1&id=g51nn&originHeight=518&originWidth=1065&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=gHR6q&originHeight=518&originWidth=1065&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041700011.png#crop=0&crop=0&crop=1&crop=1&id=xUl59&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=D1Fl7&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 代码抽离`src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041707095.png#crop=0&crop=0&crop=1&crop=1&id=TAlwe&originHeight=923&originWidth=714&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=tNQoi&originHeight=923&originWidth=714&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 跳转逻辑完善

> 如果购物车里面没有数据, 是不应该进行跳转结算的

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041708598.png#crop=0&crop=0&crop=1&crop=1&id=juucn&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Gwx1B&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 判断购物车总量, 如果有值, 则跳转

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041716962.png#crop=0&crop=0&crop=1&crop=1&id=okP9p&originHeight=344&originWidth=1026&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=uNL9l&originHeight=344&originWidth=1026&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 订单页返回逻辑

> 点击应该返回上一页

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041717080.png#crop=0&crop=0&crop=1&crop=1&id=B1z9W&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=i2b1Q&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 首先把原来的返回逻辑抽离出来`src\effects\backEffect.js`

```javascript
import { useRouter } from "vue-router";
export const useBackRouterEffect = () => {
	const router = useRouter();
	const handleBackClick = () => {
		router.back();
	};
	return handleBackClick;
};
```

> 修改之前的代码逻辑`src\views\shop\Shop.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041849867.png#crop=0&crop=0&crop=1&crop=1&id=J0ty2&originHeight=835&originWidth=1853&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nbBEk&originHeight=835&originWidth=1853&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 修改订单页

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041735832.png#crop=0&crop=0&crop=1&crop=1&id=kef5s&originHeight=462&originWidth=977&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=gIDHF&originHeight=462&originWidth=977&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041849528.png#crop=0&crop=0&crop=1&crop=1&id=wiTIh&originHeight=245&originWidth=968&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=m4yMw&originHeight=245&originWidth=968&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203041736992.png#crop=0&crop=0&crop=1&crop=1&id=DYKU6&originHeight=315&originWidth=998&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EJL3w&originHeight=315&originWidth=998&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题, 可以正常跳转

# 确认订单页底部

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203042253175.png#crop=0&crop=0&crop=1&crop=1&id=pYotS&originHeight=693&originWidth=402&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=s7HC1&originHeight=693&originWidth=402&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 首先是 html `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203042256766.png#crop=0&crop=0&crop=1&crop=1&id=N4kmR&originHeight=393&originWidth=528&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=hfRDp&originHeight=393&originWidth=528&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<div class="container__bottom">
	<div class="container__bottom__left">
		实付金额
		<span class="container__bottom__left__total-price">¥62</span>
	</div>
	<div class="container__bottom__right">提交订单</div>
</div>
```

> 接下来是 css 样式 `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203042305714.png#crop=0&crop=0&crop=1&crop=1&id=uQarj&originHeight=655&originWidth=1086&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=UnGNc&originHeight=655&originWidth=1086&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
&__bottom {
	display: flex;
	width: 375px;
	height: 49px;
	position: fixed;
	left: 0;
	bottom: 0;
	background-color: #fff;
	&__left {
		padding-left: 24px;
		box-sizing: border-box;
		width: 277px;
		background-color: #fff;
		font-family: PingFangSC-Regular;
		font-size: 14px;
		color: #333333;
		line-height: 49px;
		&__total-price {
			font-family: PingFangSC-Medium;
			font-size: 16px;
			color: #333333;
			text-align: right;
			line-height: 49px;
		}
	}
	&__right {
		width: 98px;
		background: #4fb0f9;
		font-family: PingFangSC-Medium;
		font-size: 14px;
		color: #ffffff;
		text-align: center;
		line-height: 49px;
	}
}
```

> 最终的效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203042305432.png#crop=0&crop=0&crop=1&crop=1&id=kxK5X&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=XE1Gg&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 展示总价

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203042307409.png#crop=0&crop=0&crop=1&crop=1&id=pC7P7&originHeight=661&originWidth=366&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zTYIV&originHeight=661&originWidth=366&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 我们拥有所有的购物信息, 所以可以计算总价
>
> `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051233533.png#crop=0&crop=0&crop=1&crop=1&id=Gv3hJ&originHeight=835&originWidth=1747&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=PMfC7&originHeight=835&originWidth=1747&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051234031.png#crop=0&crop=0&crop=1&crop=1&id=qgAEl&originHeight=835&originWidth=1840&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Wq0eK&originHeight=835&originWidth=1840&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 订单页滚动条

> 如果商品过多, 需要设置滚动条 `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051421473.png#crop=0&crop=0&crop=1&crop=1&id=cTGNj&originHeight=265&originWidth=1385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=xwZqE&originHeight=265&originWidth=1385&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051417089.png#crop=0&crop=0&crop=1&crop=1&id=RpKq6&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=KMyqM&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 订单页查看更多

> 如果超过两条, 就会折叠

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051422546.png#crop=0&crop=0&crop=1&crop=1&id=VSt0h&originHeight=659&originWidth=369&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=OWl9g&originHeight=659&originWidth=369&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 思路: 判断个数, 超过两个, 显示展开更多的按钮, 点击展开更多按钮, 显示剩下的内容
>
> 首先需要字体图标

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051523529.png#crop=0&crop=0&crop=1&crop=1&id=YtfOv&originHeight=562&originWidth=978&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=xQOJW&originHeight=562&originWidth=978&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051523085.png#crop=0&crop=0&crop=1&crop=1&id=y5bpy&originHeight=269&originWidth=1278&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=bzIZs&originHeight=269&originWidth=1278&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写 html `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051531081.png#crop=0&crop=0&crop=1&crop=1&id=wnGGU&originHeight=353&originWidth=615&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=uRqWz&originHeight=353&originWidth=615&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写 css 样式

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051531338.png#crop=0&crop=0&crop=1&crop=1&id=zZfET&originHeight=594&originWidth=520&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=cFo8k&originHeight=594&originWidth=520&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
&__more {
	width: 307px;
	height: 28px;
	background: #f5f5f5;
	margin: 0 auto;
	font-size: 14px;
	color: #999999;
	line-height: 28px;
	text-align: center;
	margin-bottom: 12px;
}
```

> 最终的效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051532475.png#crop=0&crop=0&crop=1&crop=1&id=gkB2X&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=mF94e&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 继续编写 html, 把前两个商品的遍历和剩下商品的遍历分开

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051539663.png#crop=0&crop=0&crop=1&crop=1&id=WeCPg&originHeight=433&originWidth=713&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=AMU5B&originHeight=433&originWidth=713&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<!-- 前两个 -->
<div v-for="item of Object.keys(cartItems).slice(0, 2)" :key="item.id" class="container__order__info__item">
	<div class="container__order__info__item__left">
		<img :src="cartItems[item].imgUrl" alt="" class="container__order__info__item__left__image" />
	</div>
	<div class="container__order__info__item__right">
		<div class="container__order__info__item__right__name">{{ cartItems[item].name }}</div>
		<div class="container__order__info__item__right__price">
			<div class="container__order__info__item__right__price__left">
				¥{{ cartItems[item].promotionPrice }} x {{ cartItems[item].count }}
			</div>
			<div class="container__order__info__item__right__price__right">
				¥{{ ( cartItems[item].promotionPrice * cartItems[item].count ).toFixed(2) }}
			</div>
		</div>
	</div>
</div>
```

```html
<!-- 后面的 -->
<template v-if="false">
	<div v-for="item of Object.keys(cartItems).slice(2)" :key="item" class="container__order__info__item">
		<div class="container__order__info__item__left">
			<img :src="cartItems[item].imgUrl" alt="" class="container__order__info__item__left__image" />
		</div>
		<div class="container__order__info__item__right">
			<div class="container__order__info__item__right__name">{{ cartItems[item].name }}</div>
			<div class="container__order__info__item__right__price">
				<div class="container__order__info__item__right__price__left">
					¥{{ cartItems[item].promotionPrice }} x {{ cartItems[item].count }}
				</div>
				<div class="container__order__info__item__right__price__right">
					¥{{ ( cartItems[item].promotionPrice * cartItems[item].count ).toFixed(2) }}
				</div>
			</div>
		</div>
	</div>
</template>
```

> 然后我们做点击查看更多的逻辑, 如果数量超过两个, 就显示查看更多, 剩下的遍历先隐藏, 如果点击了查看更多, 就显示剩下的商品, 查看更多的按钮隐藏
>
> `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051542906.png#crop=0&crop=0&crop=1&crop=1&id=YjKDa&originHeight=432&originWidth=791&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=gpapu&originHeight=432&originWidth=791&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051549849.png#crop=0&crop=0&crop=1&crop=1&id=w0X9S&originHeight=533&originWidth=920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=afuzR&originHeight=533&originWidth=920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051549560.png#crop=0&crop=0&crop=1&crop=1&id=wlKDa&originHeight=638&originWidth=984&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ChfqN&originHeight=638&originWidth=984&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

# 查看更多的商品种类和数量

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051554713.png#crop=0&crop=0&crop=1&crop=1&id=F8CDE&originHeight=401&originWidth=1083&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=u6gDE&originHeight=401&originWidth=1083&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051554045.png#crop=0&crop=0&crop=1&crop=1&id=YLJtN&originHeight=461&originWidth=1069&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=vAXqO&originHeight=461&originWidth=1069&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051555576.png#crop=0&crop=0&crop=1&crop=1&id=jmZev&originHeight=689&originWidth=1128&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=dXBg0&originHeight=689&originWidth=1128&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051553170.png#crop=0&crop=0&crop=1&crop=1&id=vKgH6&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=vFSDU&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 订单页弹框

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051732561.png#crop=0&crop=0&crop=1&crop=1&id=lvWRw&originHeight=652&originWidth=363&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=b3wrw&originHeight=652&originWidth=363&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 首先编写 html

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051737775.png#crop=0&crop=0&crop=1&crop=1&id=qd7GZ&originHeight=475&originWidth=1062&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=yiuDB&originHeight=475&originWidth=1062&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<div class="container__mask">
	<div class="container__mask__black-panel"></div>
	<div class="container__mask__white-panel">
		<div class="container__mask__white-panel__title">确认要离开收银台？</div>
		<div class="container__mask__white-panel__content">请尽快完成支付，否则将被取消</div>
		<div class="container__mask__white-panel__buttons">
			<div class="container__mask__white-panel__buttons__cancel">取消订单</div>
			<div class="container__mask__white-panel__buttons__confirm">确认支付</div>
		</div>
	</div>
</div>
```

> 然后编写对应的 css

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051748917.png#crop=0&crop=0&crop=1&crop=1&id=dfq2h&originHeight=736&originWidth=1269&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=mhI79&originHeight=736&originWidth=1269&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
&__mask {
	&__black-panel {
		position: fixed;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		background: rgba(0, 0, 0, 0.5);
	}
	&__white-panel {
		box-sizing: border-box;
		padding-top: 24px;
		width: 301px;
		height: 157px;
		background: #ffffff;
		border-radius: 4px;
		position: fixed;
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
		&__title {
			font-family: PingFangSC-Medium;
			font-size: 18px;
			color: #333333;
			text-align: center;
			margin-bottom: 12px;
		}
		&__content {
			font-family: PingFangSC-Regular;
			font-size: 14px;
			text-align: center;
			color: #666666;
			margin-bottom: 26px;
		}
		&__buttons {
			width: 184px;
			height: 32px;
			display: flex;
			justify-content: space-between;
			margin: 0 auto;
			&__cancel {
				width: 80px;
				height: 32px;
				border: 1px solid #4fb0f9;
				border-radius: 16px;
				font-family: PingFangSC-Regular;
				font-size: 14px;
				color: #0091ff;
				line-height: 32px;
				text-align: center;
			}
			&__confirm {
				width: 80px;
				height: 32px;
				background: #4fb0f9;
				border: 1px solid #4fb0f9;
				border-radius: 16px;
				font-family: PingFangSC-Regular;
				font-size: 14px;
				color: #ffffff;
				line-height: 32px;
				text-align: center;
			}
		}
	}
}
```

> 最终效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051748525.png#crop=0&crop=0&crop=1&crop=1&id=DEQxw&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=QVLHp&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 弹框的显示和隐藏

> 点击提交订单显示, 点击取消订单或者黑色遮罩消失

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051805781.png#crop=0&crop=0&crop=1&crop=1&id=Lq8iP&originHeight=436&originWidth=969&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=sB4nS&originHeight=436&originWidth=969&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051806846.png#crop=0&crop=0&crop=1&crop=1&id=yeUhH&originHeight=800&originWidth=1136&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=dsxdt&originHeight=800&originWidth=1136&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051806630.png#crop=0&crop=0&crop=1&crop=1&id=C6qBD&originHeight=599&originWidth=1144&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=DHXE8&originHeight=599&originWidth=1144&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051807022.png#crop=0&crop=0&crop=1&crop=1&id=euUN5&originHeight=917&originWidth=1209&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=SBrlc&originHeight=917&originWidth=1209&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203051808646.gif#crop=0&crop=0&crop=1&crop=1&id=LwD7z&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nHhzm&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 提交订单

> 提交订单确认支付之后会弹出提示信息

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061645259.png#crop=0&crop=0&crop=1&crop=1&id=FeDq0&originHeight=666&originWidth=363&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=mPGLn&originHeight=666&originWidth=363&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 需要字体图标, 搜索`correct`, `wrong`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061653155.png#crop=0&crop=0&crop=1&crop=1&id=mxhH0&originHeight=535&originWidth=1037&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ZcWRs&originHeight=535&originWidth=1037&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写 html `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061712427.png#crop=0&crop=0&crop=1&crop=1&id=tnKxn&originHeight=337&originWidth=1099&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Zz19C&originHeight=337&originWidth=1099&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<div class="container__mask__notice-panel">
	<div class="container__mask__notice-panel__cancel-iconfont">&#xe633;</div>
	<div class="container__mask__notice-panel__right-iconfont">&#xe608;</div>
	<div class="container__mask__notice-panel__notice">支付成功，等待配送</div>
</div>
```

> 编写 css `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061713187.png#crop=0&crop=0&crop=1&crop=1&id=RGFT8&originHeight=359&originWidth=641&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=fxzAK&originHeight=359&originWidth=641&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
&__notice-panel {
	width: 301px;
	height: 156px;
	background: #ffffff;
	border-radius: 4px;
	position: fixed;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	&__cancel-iconfont {
		font-size: 18px;
		color: #666666;
		position: absolute;
		top: 12px;
		right: 12px;
	}
	&__right-iconfont {
		font-size: 56px;
		color: #000;
		text-align: center;
		margin-top: 42px;
		font-weight: bold;
	}
	&__notice {
		font-family: PingFangSC-Medium;
		font-size: 18px;
		color: #333333;
		text-align: center;
		margin-top: 6px;
	}
}
```

> 最终的效果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061720357.png#crop=0&crop=0&crop=1&crop=1&id=ktLFJ&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ypb4H&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 编写相关的显示隐藏的逻辑
>
> `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061855985.png#crop=0&crop=0&crop=1&crop=1&id=iYf0h&originHeight=238&originWidth=1142&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=yzLnT&originHeight=238&originWidth=1142&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061856559.png#crop=0&crop=0&crop=1&crop=1&id=fyVWL&originHeight=436&originWidth=1245&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=B5yls&originHeight=436&originWidth=1245&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061856874.png#crop=0&crop=0&crop=1&crop=1&id=ZiObj&originHeight=616&originWidth=1122&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=SCLg9&originHeight=616&originWidth=1122&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```javascript
// 蒙层的显示隐藏逻辑
const maskShowEffect = () => {
	// 蒙层显示, 默认false, 不显示
	const maskShow = ref(false);
	// 白色面板
	const whitePanelShow = ref(false);
	// 通知面板
	const noticePanelShow = ref(false);

	// 黑色蒙层点击逻辑
	const blackPanelClick = () => {
		// 整个蒙层隐藏
		maskShow.value = false;
		// 白面板关闭
		whitePanelShow.value = false;
		// 通知面板关闭
		noticePanelShow.value = false;
		// 如果通知面板展示的话, 应该跳转到订单页
	};
	// 订单返回点击效果
	const cancelOrderClick = () => {
		// 点击返回, 隐藏蒙层
		maskShow.value = false;
		// 白面板关闭
		whitePanelShow.value = false;
		// 通知面板关闭
		noticePanelShow.value = false;
	};
	// 提交订单逻辑
	const submitOrderClick = () => {
		// 点击提交订单, 展示蒙层
		maskShow.value = true;
		// 白面板关闭
		whitePanelShow.value = true;
		// 通知面板关闭
		noticePanelShow.value = false;
	};

	// 消息模板的叉号点击逻辑
	const cancelIconClick = () => {
		// 所有面板隐藏
		// 点击提交订单, 展示蒙层
		maskShow.value = false;
		// 白面板关闭
		whitePanelShow.value = false;
		// 通知面板关闭
		noticePanelShow.value = false;
		// 跳转到订单页
	};
	// 点击确认支付
	const confirmPayClick = () => {
		// 点击确认支付
		maskShow.value = true;
		// 白面板关闭
		whitePanelShow.value = false;
		// 通知面板关闭
		noticePanelShow.value = true;
	};
	return {
		maskShow,
		blackPanelClick,
		submitOrderClick,
		cancelOrderClick,
		whitePanelShow,
		noticePanelShow,
		cancelIconClick,
		confirmPayClick,
	};
};
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061857655.png#crop=0&crop=0&crop=1&crop=1&id=K0wqJ&originHeight=633&originWidth=1036&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=m2pup&originHeight=633&originWidth=1036&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061857395.png#crop=0&crop=0&crop=1&crop=1&id=kSEuO&originHeight=752&originWidth=683&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=DXEIl&originHeight=752&originWidth=683&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203061859774.gif#crop=0&crop=0&crop=1&crop=1&id=Vr74Y&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=hYCq6&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 清空购物车

> 点击确认支付之后, 应该清空购物车 `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071455102.png#crop=0&crop=0&crop=1&crop=1&id=KYJTj&originHeight=339&originWidth=1561&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=j8fsK&originHeight=339&originWidth=1561&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071455709.png#crop=0&crop=0&crop=1&crop=1&id=dhzdR&originHeight=520&originWidth=1573&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=DwePJ&originHeight=520&originWidth=1573&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 创建订单列表页面

> 确认支付, 清空购物车之后, 应该可以跳转到订单列表页面, 所以我们需要先创建订单列表页面
>
> `src\views\order\OrderList.vue`

```vue
<template>this is orderList</template>
<script>
export default {
	name: "OrderList",
};
</script>
<style lang="scss" scoped></style>
```

> 修改路由`src\router\index.js`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071507843.png#crop=0&crop=0&crop=1&crop=1&id=IC4WZ&originHeight=387&originWidth=1738&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=uvZQS&originHeight=387&originWidth=1738&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 确认支付后跳转

> 我们已经创建了订单列表页面, 现在需要实现确认支付后的跳转
>
> `src\views\order\OrderConfirmation.vue`

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071513850.png#crop=0&crop=0&crop=1&crop=1&id=D2eHn&originHeight=238&originWidth=1805&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=zzSWb&originHeight=238&originWidth=1805&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071514159.png#crop=0&crop=0&crop=1&crop=1&id=XgQCl&originHeight=791&originWidth=1685&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=GfP6p&originHeight=791&originWidth=1685&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071514251.png#crop=0&crop=0&crop=1&crop=1&id=rHdRk&originHeight=339&originWidth=1549&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=L9paq&originHeight=339&originWidth=1549&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 创建 获取订单列表 接口

> 跳转到订单列表页面之后, 应该调用订单列表接口来获取该用户的所有订单数据, 所以我们需要创建订单列表接口, 接收用户 id, 获取该 id 下的所有订单信息

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071731758.png#crop=0&crop=0&crop=1&crop=1&id=sqMFD&originHeight=760&originWidth=1033&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=v1iMF&originHeight=760&originWidth=1033&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```json
{
	"code": "0000",
	"data": [
		{
			"shopId": 1,
			"shopName": "沃尔玛-1",
			"itemList": [
				{
					"id": 1,
					"name": "全部-番茄150g/份",
					"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png",
					"sales": 1,
					"promotionPrice": 1.6,
					"originalPrice": 1.6,
					"count": 1,
					"checked": true
				},
				{
					"id": 2,
					"name": "全部-番茄250g/份",
					"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527853.png",
					"sales": 2,
					"promotionPrice": 2.6,
					"originalPrice": 2.6,
					"count": 2,
					"checked": true
				},
				{
					"id": 3,
					"name": "全部-番茄350g/份",
					"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527922.png",
					"sales": 3,
					"promotionPrice": 3.6,
					"originalPrice": 3.6,
					"count": 3,
					"checked": true
				},
				{
					"id": 4,
					"name": "全部-番茄450g/份",
					"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261530259.png",
					"sales": 4,
					"promotionPrice": 4.6,
					"originalPrice": 4.6,
					"count": 4,
					"checked": true
				}
			]
		},
		{
			"shopId": 2,
			"shopName": "沃尔玛-2",
			"itemList": [
				{
					"id": 2,
					"name": "全部-番茄250g/份",
					"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527853.png",
					"sales": 2,
					"promotionPrice": 2.6,
					"originalPrice": 2.6,
					"count": 2,
					"checked": true
				},
				{
					"id": 3,
					"name": "全部-番茄350g/份",
					"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527922.png",
					"sales": 3,
					"promotionPrice": 3.6,
					"originalPrice": 3.6,
					"count": 3,
					"checked": true
				},
				{
					"id": 4,
					"name": "全部-番茄450g/份",
					"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261530259.png",
					"sales": 4,
					"promotionPrice": 4.6,
					"originalPrice": 4.6,
					"count": 4,
					"checked": true
				}
			]
		},
		{
			"shopId": 3,
			"shopName": "沃尔玛-3",
			"itemList": [
				{
					"id": 1,
					"name": "全部-番茄150g/份",
					"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png",
					"sales": 1,
					"promotionPrice": 1.6,
					"originalPrice": 1.6,
					"count": 1,
					"checked": true
				},
				{
					"id": 3,
					"name": "全部-番茄350g/份",
					"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527922.png",
					"sales": 3,
					"promotionPrice": 3.6,
					"originalPrice": 3.6,
					"count": 3,
					"checked": true
				},
				{
					"id": 4,
					"name": "全部-番茄450g/份",
					"imgUrl": "https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261530259.png",
					"sales": 4,
					"promotionPrice": 4.6,
					"originalPrice": 4.6,
					"count": 3,
					"checked": true
				}
			]
		}
	],
	"desc": "成功"
}
```

# 订单页面 HTML

> 我们开始编写订单列表页面的 html

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071544819.png#crop=0&crop=0&crop=1&crop=1&id=yH2WW&originHeight=665&originWidth=373&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=jGbkT&originHeight=665&originWidth=373&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071604110.png#crop=0&crop=0&crop=1&crop=1&id=YL0cX&originHeight=493&originWidth=1280&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=NQgbp&originHeight=493&originWidth=1280&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```html
<template>
	<div class="header">我的订单</div>
	<div class="container">
		<div class="container__order">
			<div class="container__order__top">
				<div class="container__order__top__title">沃尔玛</div>
				<div class="container__order__top__status">已取消</div>
			</div>
			<div class="container__order__bottom">
				<div class="container__order__bottom__products">
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527853.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527922.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261530259.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
				</div>
				<div class="container__order__bottom__count">
					<div class="container__order__bottom__count__total-price">¥66.69</div>
					<div class="container__order__bottom__count__total-number">共6件</div>
				</div>
			</div>
		</div>
		<div class="container__order">
			<div class="container__order__top">
				<div class="container__order__top__title">沃尔玛</div>
				<div class="container__order__top__status">已取消</div>
			</div>
			<div class="container__order__bottom">
				<div class="container__order__bottom__products">
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527853.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527922.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261530259.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
				</div>
				<div class="container__order__bottom__count">
					<div class="container__order__bottom__count__total-price">¥66.69</div>
					<div class="container__order__bottom__count__total-number">共6件</div>
				</div>
			</div>
		</div>
		<div class="container__order">
			<div class="container__order__top">
				<div class="container__order__top__title">沃尔玛</div>
				<div class="container__order__top__status">已取消</div>
			</div>
			<div class="container__order__bottom">
				<div class="container__order__bottom__products">
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527635.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527853.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261527922.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
					<img
						src="https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202202261530259.png"
						class="container__order__bottom__products__image"
						alt=""
					/>
				</div>
				<div class="container__order__bottom__count">
					<div class="container__order__bottom__count__total-price">¥66.69</div>
					<div class="container__order__bottom__count__total-number">共6件</div>
				</div>
			</div>
		</div>
	</div>
	<div class="docker"></div>
</template>
```

# 订单页面 CSS

> 根据设计稿, 开始编写 css

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071544819.png#crop=0&crop=0&crop=1&crop=1&id=CuOFp&originHeight=665&originWidth=373&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kzyAp&originHeight=665&originWidth=373&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```vue
<style lang="scss" scoped>
.header {
	width: 375px;
	height: 44px;
	background-color: #fff;
	font-family: PingFangSC-Regular;
	font-size: 16px;
	color: #333333;
	text-align: center;
	line-height: 44px;
}
.container {
	position: fixed;
	top: 44px;
	right: 0;
	left: 0;
	bottom: 49px;
	background-color: #f8f8f8;
	&__order {
		width: 339px;
		height: 110px;
		margin: 16px auto;
		overflow: hidden;
		background: #ffffff;
		border-radius: 4px;
		padding: 16px;
		box-sizing: border-box;
		&__top {
			display: flex;
			justify-content: space-between;
			height: 22px;
			margin-bottom: 16px;
			align-items: center;
			&__title {
				font-family: PingFangSC-Medium;
				font-size: 16px;
				color: #333333;
			}
			&__status {
				font-family: PingFangSC-Medium;
				font-size: 14px;
				color: #999999;
			}
		}
		&__bottom {
			align-items: center;
			display: flex;
			justify-content: space-between;
			&__products {
				&__image {
					width: 40px;
					height: 40px;
					margin-right: 12px;
				}
			}
			&__count {
				&__total-price {
					font-family: PingFangSC-Regular;
					font-size: 14px;
					color: #e93b3b;
					text-align: right;
					margin-bottom: 4px;
					line-height: 20px;
				}
				&__total-number {
					font-family: PingFangSC-Regular;
					font-size: 12px;
					color: #333333;
					line-height: 14px;
					text-align: right;
				}
			}
		}
	}
}
</style>
```

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071617011.png#crop=0&crop=0&crop=1&crop=1&id=W9wEv&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=xtgue&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# docker 复用

> 底部的 docker, 我们之前写过, 直接复用即可

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071621409.png#crop=0&crop=0&crop=1&crop=1&id=MbhDP&originHeight=601&originWidth=1151&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Nblqg&originHeight=601&originWidth=1151&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071621770.png#crop=0&crop=0&crop=1&crop=1&id=m4NZW&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=egENv&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 但是我们发现, 首页高亮, 订单没有高亮, 所以我们需要进行高亮的设置

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071635545.png#crop=0&crop=0&crop=1&crop=1&id=JAclA&originHeight=675&originWidth=1847&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=PuLd8&originHeight=675&originWidth=1847&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071636379.png#crop=0&crop=0&crop=1&crop=1&id=dBoji&originHeight=469&originWidth=1430&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=osfiz&originHeight=469&originWidth=1430&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071637106.png#crop=0&crop=0&crop=1&crop=1&id=ORLxu&originHeight=452&originWidth=1198&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=mhgOP&originHeight=452&originWidth=1198&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071638658.png#crop=0&crop=0&crop=1&crop=1&id=vouXB&originHeight=803&originWidth=1154&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=COHgn&originHeight=803&originWidth=1154&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 跳转订单页面

> 确认支付后, 应该跳转到订单页面, 点击底部的 docker, 也可以跳转到订单页面, 点击首页可以跳回到首页

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071651863.png#crop=0&crop=0&crop=1&crop=1&id=XQy0q&originHeight=836&originWidth=1708&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=EmiZV&originHeight=836&originWidth=1708&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071655936.gif#crop=0&crop=0&crop=1&crop=1&id=v2DHB&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=OGDLH&originHeight=666&originWidth=372&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 调用订单列表接口, 展示数据

> 进入订单页面的时候, 应该调用接口, 获取并展示数据到页面

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071713887.png#crop=0&crop=0&crop=1&crop=1&id=K0BV4&originHeight=787&originWidth=1577&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=aPvey&originHeight=787&originWidth=1577&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 可以获取数据, 接下来我们遍历数据并展示到页面上

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071835464.png#crop=0&crop=0&crop=1&crop=1&id=qRYuk&originHeight=718&originWidth=1125&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=BFL2N&originHeight=718&originWidth=1125&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071835913.png#crop=0&crop=0&crop=1&crop=1&id=wkNLx&originHeight=477&originWidth=1251&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=kAh81&originHeight=477&originWidth=1251&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071835583.png#crop=0&crop=0&crop=1&crop=1&id=l3WKA&originHeight=686&originWidth=1218&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=b6xQd&originHeight=686&originWidth=1218&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071836955.png#crop=0&crop=0&crop=1&crop=1&id=zVK0L&originHeight=524&originWidth=1177&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=nLA7o&originHeight=524&originWidth=1177&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 最终的结果

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071834073.png#crop=0&crop=0&crop=1&crop=1&id=xrAUj&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=qJiVK&originHeight=667&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 代码完善

> 把我们之前写的 px 改成 rem

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071902879.png#crop=0&crop=0&crop=1&crop=1&id=JcYw5&originHeight=214&originWidth=382&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=INiWK&originHeight=214&originWidth=382&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 真机调试

> 使用 android 模拟器, 测试真机调试的效果, 或者让你的手机和电脑在一个 wifi 热点下, 也可以用手机调试

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203071904709.png#crop=0&crop=0&crop=1&crop=1&id=LTMxf&originHeight=261&originWidth=582&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=Du7kp&originHeight=261&originWidth=582&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 雷电 android 模拟器地址, 下载绿色版即可
>
> [https://pan.baidu.com/s/1TCYP-UwPeQ_yaceLHh2hdA](https://pan.baidu.com/s/1TCYP-UwPeQ_yaceLHh2hdA)
>
> 提取码：ghxi

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203081424513.png#crop=0&crop=0&crop=1&crop=1&id=jzIqn&originHeight=1620&originWidth=933&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=SlEvh&originHeight=1620&originWidth=933&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 其他页面正常, 但是发现订单页的字体过大

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203081424753.png#crop=0&crop=0&crop=1&crop=1&id=MYmLH&originHeight=1584&originWidth=891&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=ypdFm&originHeight=1584&originWidth=891&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 需要把原来的缩放代码做调整

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203081522796.png#crop=0&crop=0&crop=1&crop=1&id=OmXx1&originHeight=880&originWidth=1420&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=KOsgE&originHeight=880&originWidth=1420&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> 经过测试, 没有问题

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203081521354.png#crop=0&crop=0&crop=1&crop=1&id=R4O9O&originHeight=1620&originWidth=933&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=DxFgE&originHeight=1620&originWidth=933&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 项目打包上线

> 我们写的项目需要打包之后, 生成对应的 html, css, js 文件, 才能上线, 所以第一步打包成"正常"的代码, 然后第二步发给后端程序员, 让后端的程序员帮我们上线
>
> 需要创建`vue.config.js`, 在里面书写打包相关的配置

```javascript
module.exports = {
	publicPath: "/jd/你的名字的全拼",
};
```

> 运行打包命令

```bash
npm run build
```

> 我们都得到一个 dist 文件夹, 里面是打包好的文件, 大家把这个文件夹做成压缩包, 命名成`你的名字的全拼`, 发给我, 我扮演后端程序员, 帮大家上线, 上线后的访问地址`http://www.happy-learning.cn/jd/你的名字的全拼/#/`通过手机浏览器就可以打开

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202203081537132.png#crop=0&crop=0&crop=1&crop=1&id=UZVlZ&originHeight=392&originWidth=1875&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=iC4MU&originHeight=392&originWidth=1875&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 完结散花

![](https://markdown-1253389072.cos.ap-nanjing.myqcloud.com/202201092359838.png#crop=0&crop=0&crop=1&crop=1&id=A1kzH&originHeight=389&originWidth=643&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=#id=l0rpj&originHeight=389&originWidth=643&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
